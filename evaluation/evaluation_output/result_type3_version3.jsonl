{
  "db_name": "hr_chinese_fk",
  "user_input": "请列出在T127财年中表现最差(D级绩效)且工龄超过10年的所有员工的姓名和部门名称，如果在职，同时列出他们的直属上司姓名。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]",
    "Table:`a_sap_performance_ai`(这个是公司每个员工每个财年的绩效表),Columns:[`编制年度` '公司财年', `姓名`, `人员工号`, `绩效` '绩效排序（好->差）:[\"A\",\"B+\",\"B\",\"B-\",\"C\",\"D\"]']",
    "Table:`a_sap_reporting_relationship_chinese`(这个是公司每个员工汇报关系表。),Columns:[`开始日期` '汇报关系开始的时间', `结束日期` '汇报关系结束的时间', `人员工号` '该表主键，每个员工的唯一id值。', `姓名`, `入司日期`, `工作性质` '值为：[\"全职-计算\",\"挂职\",\"兼职-不计算\",\"劳务外包\"]', `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"idt\",\"apd\",\"hr\",\"qa\",\"fe\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"ai\",\"ad\",\"cpa\",\"ta\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"emc\",\"ipqc\",\"ph\",\"ep-m\"]等等', `是否管理机构` '该员工是否是部门（一级机构），小组（二级机构，三级机构）负责人。值为：[\"是\",\"否\"]', `主管1姓名`, `主管1职位`, `主管1职务`, `主管2姓名`, `主管2职位`, `主管2职务`, `经理1姓名`, `经理1职位`, `经理1职务`, `经理2姓名`, `经理2职位`, `经理2职务`, `经理3姓名`, `经理3职位`, `经理3职务`, `经理4姓名`, `经理4职位`, `经理4职务`, `总监1姓名`, `总监1职位`, `总监1职务`, `总监2姓名`, `总监2职位`, `总监2职务`, `总监3姓名`, `总监3职位`, `总监3职务`, `总监4姓名`, `总监4职位`, `总监4职务`, `一级机构负责人姓名`, `一级机构负责人职位`, `一级机构负责人职务`]"
  ],
  "extend_info": [
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}",
    "{'parent_org': 'SD', 'shortname': 'BCM', 'fullname': 'Business Continuity Management(Group)', 'chinesename': 'BCM管理组(集团)'}",
    "{'parent_org': 'ES', 'shortname': 'ES-ND', 'fullname': 'Employee Service-ND', 'chinesename': '宁德雇员服务部'}",
    "{'parent_org': 'SD', 'shortname': 'EHS Tech', 'fullname': 'Environment,Health and Safety Technology(Group)', 'chinesename': 'EHS技术组(集团)'}",
    "{'parent_org': 'ES', 'shortname': 'ES-DG', 'fullname': 'Employee Service-DG', 'chinesename': '东莞雇员服务部'}",
    "{'parent_org': 'SD', 'shortname': 'CSR&EHS Sys', 'fullname': 'Corporate Social Responsibility & EHS System(Group)', 'chinesename': '企业社会责任&EHS体系组(集团)'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：提供一个报告，显示所有在T127年内入职的员工，他们的姓名、入职日期和部门，按入职日期升序排序。\n\tsql1：SELECT 姓名, 入职日期, 一级机构名称 FROM a_sap_employee_information_chinese WHERE 入职日期::text LIKE '2021%' ORDER BY 入职日期 ASC LIMIT 50\n\n\t用户输入2：请列出所有员工的姓名和对应的直属上司姓名，并按照部门分类。\n\tsql2：SELECT e.姓名, e.直属上司姓名, e.一级机构名称 FROM a_sap_employee_information_chinese e ORDER BY e.一级机构名称 LIMIT 50\n\n\t用户输入3：请列出目前所有员工的姓名和对应的职位。\n\tsql3：SELECT 姓名, 职位 FROM a_sap_employee_information_chinese LIMIT 50\n\n\t用户输入4：找出所有在CPD一级机构工作，且直属上司职务为'总监'级别的员工信息。\n\tsql4：SELECT e.* FROM a_sap_employee_information_chinese e INNER JOIN a_sap_reporting_relationship_chinese r ON e.直属上司工号 = r.人员工号 WHERE e.一级机构名称 = 'CPD' AND r.职务名称 LIKE '%总监%' LIMIT 50\n\n\t用户输入5：列出当前在职员工的平均工龄。\n\tsql5：SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均工龄 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职'\n\n\t用户输入6：统计每个一级机构下，直属上司姓名为'张三'的员工所在的二级机构及员工数。\n\tsql6：SELECT 一级机构, 二级机构, COUNT(人员工号) AS 员工数 FROM a_sap_reporting_relationship_chinese WHERE 直属上司姓名 = '张三' GROUP BY 一级机构, 二级机构 ORDER BY 一级机构, 二级机构 LIMIT 50\n\n",
  "thoughts": "要找出T127财年中绩效为D级且工龄超过10年的员工，首先需要从a_sap_performance_ai表中筛选出绩效为D的员工，然后根据人员工号关联a_sap_employee_information_chinese表以找出这些员工的入职日期和当前雇佣状态。工龄超过10年意味着入职日期要早于T127财年对应年份的10年前，即早于2012年。如果员工在职，还需要列出直属上司的姓名，这些信息也在a_sap_employee_information_chinese表中。最后，部门名称在a_sap_employee_information_chinese表中的一级机构字段。",
  "sql": "SELECT e.姓名, e.一级机构 AS 部门名称, CASE WHEN e.雇佣状态 = '在职' THEN e.直属上司姓名 ELSE NULL END AS 直属上司姓名 FROM a_sap_performance_ai p INNER JOIN a_sap_employee_information_chinese e ON p.人员工号 = e.人员工号 WHERE p.绩效 = 'D' AND p.编制年度 = 'T127' AND e.入职日期 <= '2012-01-01' AND EXTRACT(YEAR FROM AGE(CURRENT_DATE, e.入职日期)) > 10 LIMIT 50",
  "ai_sql_result": "&quot;: [{&quot;姓名&quot;: &quot;刘江川&quot;, &quot;部门名称&quot;: &quot;SEC&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;韩巧铃&quot;, &quot;部门名称&quot;: &quot;HR&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;袁仁华&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;徐际珍&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;廖业军&quot;, {&quot;姓名&quot;: &quot;余耀文&quot;, &quot;部门名称&quot;: &quot;MU Plus&quot;, &quot;直属上司姓名&quot;: &quot;董亚猛&quot;, {&quot;姓名&quot;: &quot;谢长庚&quot;, &quot;部门名称&quot;: &quot;CJR&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;阮孝彩&quot;, &quot;部门名称&quot;: &quot;PRD&quot;, &quot;直属上司姓名&quot;: &quot;康治朋&quot;, {&quot;姓名&quot;: &quot;粟森裕&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;王锋&quot;, &quot;部门名称&quot;: &quot;PRD&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;万良健&quot;, &quot;部门名称&quot;: &quot;xTW&quot;, &quot;直属上司姓名&quot;: &quot;何刚强&quot;, {&quot;姓名&quot;: &quot;叶协光&quot;, &quot;部门名称&quot;: &quot;CJR&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;郭莉莉&quot;, &quot;部门名称&quot;: &quot;QA&quot;, &quot;直属上司姓名&quot;: &quot;芦果&quot;, {&quot;姓名&quot;: &quot;刘良海&quot;, &quot;部门名称&quot;: &quot;CPD&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;唐丽&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;陈海峰&quot;, {&quot;姓名&quot;: &quot;王小群&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;王伟杰&quot;, {&quot;姓名&quot;: &quot;郎野&quot;, &quot;部门名称&quot;: &quot;RI&quot;, &quot;直属上司姓名&quot;: &quot;徐磊敏&quot;, {&quot;姓名&quot;: &quot;张伟伟&quot;, &quot;部门名称&quot;: &quot;MU-W&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;冼祖锋&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;何永萍&quot;, {&quot;姓名&quot;: &quot;康莎莎&quot;, &quot;部门名称&quot;: &quot;QA&quot;, &quot;直属上司姓名&quot;: &quot;周春田&quot;, {&quot;姓名&quot;: &quot;朱久松&quot;, &quot;部门名称&quot;: &quot;ES&quot;, &quot;直属上司姓名&quot;: &quot;左允文&quot;, {&quot;姓名&quot;: &quot;吴云秋&quot;, &quot;部门名称&quot;: &quot;SD&quot;, &quot;直属上司姓名&quot;: &quot;许淑萍&quot;, {&quot;姓名&quot;: &quot;贺春霞&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;陈海峰&quot;, {&quot;姓名&quot;: &quot;张盛武&quot;, &quot;部门名称&quot;: &quot;MRD&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;黄雪慧&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;程琳&quot;, {&quot;姓名&quot;: &quot;蔡文定&quot;, &quot;部门名称&quot;: &quot;QA&quot;, &quot;直属上司姓名&quot;: &quot;肖鉴&quot;, {&quot;姓名&quot;: &quot;李英&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;李金祥&quot;, {&quot;姓名&quot;: &quot;王斌&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;曹春艳&quot;, {&quot;姓名&quot;: &quot;潘淑燕&quot;, &quot;部门名称&quot;: &quot;PRD&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;吕玉玲&quot;, &quot;部门名称&quot;: &quot;SEC&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;王安飞&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;韩世孝&quot;, &quot;部门名称&quot;: &quot;ES&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;陈世海&quot;, &quot;部门名称&quot;: &quot;ES&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;谢勇&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;刘凤&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;张辉&quot;, {&quot;姓名&quot;: &quot;何亮亮&quot;, &quot;部门名称&quot;: &quot;CJR&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;姚满军&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;单龙尾&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;杨乾国&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;王洪今&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;李亮亮&quot;, {&quot;姓名&quot;: &quot;龙艳军&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;王展金&quot;, {&quot;姓名&quot;: &quot;戴建文&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;张汝安&quot;, {&quot;姓名&quot;: &quot;彭彦彰&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;李登道&quot;, {&quot;姓名&quot;: &quot;丘三祥&quot;, &quot;部门名称&quot;: &quot;ES&quot;, &quot;直属上司姓名&quot;: &quot;朱久松&quot;, {&quot;姓名&quot;: &quot;陈泽建&quot;, &quot;部门名称&quot;: &quot;PLM&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;陈桥&quot;, &quot;部门名称&quot;: &quot;SLS&quot;, &quot;直属上司姓名&quot;: &quot;王维&quot;, {&quot;姓名&quot;: &quot;杨仕鸿&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;张汝安&quot;, {&quot;姓名&quot;: &quot;曾庆忠&quot;, &quot;部门名称&quot;: &quot;LOG&quot;, &quot;直属上司姓名&quot;: &quot;李军辉&quot;, {&quot;姓名&quot;: &quot;王彩霞&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: &quot;程琳&quot;, {&quot;姓名&quot;: &quot;李活平&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: null, {&quot;姓名&quot;: &quot;崔波华&quot;, &quot;部门名称&quot;: &quot;MU-SSL&quot;, &quot;直属上司姓名&quot;: null "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "基于当前的招聘计划，查询在T127财年第二季度（Q2）拥有最多岗位空缺的一级机构和对应的空缺数量，并列出该机构目前所有员工的平均工龄。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_staffing_recruitment_plan_chinese`(这个是公司各个部门（一级机构），小组（二级机构、三级机构），在每个编制年度(财年)/编制月度的招聘计划表。),Columns:[`编制年度` '公司的财年，值为\"TXXX\",其中XXX是数字，例如:[\"T126\",\"T127\",\"T128\"]', `编制月度` '公司财年中的月度，值有:[1,2,3,4,...,12]', `员工子组` '员工等级组别，值有[\"A1\",\"A2\",\"A3\",\"A4\",\"A5\"]，其中A5级别最高', `有效编制空缺`, `创建日期`, `年度可申请空缺数量`, `季度可申请空缺数量`, `月度可申请空缺数量`, `年度编制数量`, `季度编制数量`, `月度编制数量`, `特批编制数量`, `拟在职人数`, `有效但是没有报到空缺数`, `写入日期`, `open数`, `关闭数`, `冻结数`, `集团名称`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职级范围`]",
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]"
  ],
  "extend_info": [
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'shortname': 'PMC', 'fullname': 'Plan & Material Control', 'chinesename': '计划与物料控制部'}",
    "{'shortname': 'HR', 'fullname': 'Human Resources', 'chinesename': '人力资源部'}",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}",
    "{'parent_org': 'PMC', 'shortname': 'PMC-PC', 'fullname': 'PMC-Plan Control', 'chinesename': '计划控制组'}",
    "{'parent_org': 'HR', 'shortname': 'OPS', 'fullname': 'Operation Center', 'chinesename': '运营中心'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：当前有多少个职位在AI二级机构下空缺，并需要招聘的人数。\n\tsql1：SELECT COUNT(*) AS 职位空缺数量, SUM(有效编制空缺) AS 需要招聘的人数 FROM a_sap_staffing_recruitment_plan_chinese WHERE 二级机构 = 'AI'\n\n\t用户输入2：我们想知道当前有多少个职位是空缺的，即有效编制空缺大于0的职位。\n\tsql2：SELECT COUNT(*) FROM a_sap_staffing_recruitment_plan_chinese WHERE 有效编制空缺 > 0;\n\n\t用户输入3：统计目前公司每个一级机构下各个职务的人数分布情况。\n\tsql3：SELECT 一级机构名称, 职务名称, COUNT(*) AS 人数 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称, 职务名称 ORDER BY 一级机构名称, 职务名称 LIMIT 50\n\n\t用户输入4：统计当前全部员工的平均入职年限。\n\tsql4：SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均入职年限 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职'\n\n\t用户输入5：公司今年第二季度的有效编制空缺数量是多少？\n\tsql5：SELECT SUM(有效编制空缺) AS 第二季度有效编制空缺总数 FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T128' AND 编制月度 IN (7, 8, 9)\n\n\t用户输入6：列出当前在职员工的平均工龄。\n\tsql6：SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均工龄 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职'\n\n",
  "thoughts": "首先，我们需要找出T127财年第二季度（Q2）拥有最多岗位空缺的一级机构，这对应于编制年度为'T127'，编制月度为7, 8, 9的记录。我们可以通过对每个一级机构的有效编制空缺数进行求和和分组来找到空缺数最多的机构。然后，我们需要计算该机构目前所有在职员工的平均工龄，这需要使用员工信息表，计算在职员工入职日期与当前日期的年数差的平均值。这两个查询可以通过一级机构关联起来。",
  "sql": "WITH MostVacantOrg AS (\n    SELECT 一级机构, SUM(有效编制空缺) AS 总空缺数\n    FROM a_sap_staffing_recruitment_plan_chinese\n    WHERE 编制年度 = 'T127' AND 编制月度 IN (7, 8, 9)\n    GROUP BY 一级机构\n    ORDER BY 总空缺数 DESC\n    LIMIT 1\n), AvgSeniority AS (\n    SELECT 一级机构, AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均工龄\n    FROM a_sap_employee_information_chinese\n    WHERE 雇佣状态 = '在职'\n    GROUP BY 一级机构\n)\nSELECT m.一级机构, m.总空缺数, a.平均工龄\nFROM MostVacantOrg m\nJOIN AvgSeniority a ON m.一级机构 = a.一级机构",
  "ai_sql_result": "&quot;: [] "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "找出在上一个财年（T127）绩效为A且学历为'大学本科'的员工，并列出他们的姓名、学历、雇佣状态和人员工号。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_performance_ai`(这个是公司每个员工每个财年的绩效表),Columns:[`编制年度` '公司财年', `姓名`, `人员工号`, `绩效` '绩效排序（好->差）:[\"A\",\"B+\",\"B\",\"B-\",\"C\",\"D\"]']",
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]",
    "Table:`a_sap_employee_education_experience_chinese`(这个是公司每个员工受教育经历的数据表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `开始日期` '受教育的开始日期', `结束日期` '受教育的结束日期', `学历` '值：[\"硕士\",\"高中\",\"大学专科\",\"博士\",\"初中及以下\",\"大学本科\",\"中专\"]', `教育类型`, `院校_培训机构`, `国家`, `证书`, `第一专业`]"
  ],
  "extend_info": [
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "{'parent_org': 'DMP', 'shortname': 'Costing&D.A', 'fullname': 'Costing&Data Analysis', 'chinesename': '成本组'}",
    "{'parent_org': 'HR', 'shortname': 'TR', 'fullname': 'Total Rewards', 'chinesename': '薪酬与激励部'}",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'parent_org': 'PRJ', 'shortname': 'PRJ-NDPAP', 'fullname': 'PRJ-NDPAP', 'chinesename': 'PRJ-ND A客户项目部'}",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}",
    "{'parent_org': 'CPD', 'shortname': 'PAP', 'fullname': 'PAP - PLT and NPI Development', 'chinesename': 'A客户项目部'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：提供一个报告，显示所有在T127年内入职的员工，他们的姓名、入职日期和部门，按入职日期升序排序。\n\tsql1：SELECT 姓名, 入职日期, 一级机构名称 FROM a_sap_employee_information_chinese WHERE 入职日期::text LIKE '2021%' ORDER BY 入职日期 ASC LIMIT 50\n\n\t用户输入2：在所有教育信息中，有多少人持有大学本科学历，并且在2021年以前入职的？\n\tsql2：SELECT COUNT(DISTINCT 人员工号) FROM a_sap_employee_education_experience_chinese WHERE 学历 = '大学本科' AND 入职日期 < '2021-01-01'\n\n\t用户输入3：我们需要找出在职状态为'在职'且最高学历为'博士'的员工名单。\n\tsql3：SELECT DISTINCT e.姓名 FROM a_sap_employee_information_chinese e INNER JOIN a_sap_employee_education_experience_chinese ed ON e.人员工号 = ed.人员工号 WHERE e.雇佣状态 = '在职' AND ed.学历 = '博士' LIMIT 50\n\n\t用户输入4：持有本科学历的员工有多少人?\n\tsql4：SELECT COUNT(DISTINCT 人员工号) FROM a_sap_employee_education_experience_chinese WHERE 学历 = '大学本科';\n\n\t用户输入5：查询员工中持有硕士及以上学位员工的数量占比。\n\tsql5：SELECT (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese WHERE 学历 IN ('硕士', '博士'))::FLOAT / (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese)::FLOAT AS master_and_above_ratio\n\n\t用户输入6：请列出目前所有一级机构下，具有本科学历且职位为技术员的员工列表。\n\tsql6：SELECT e.人员工号, e.姓名, e.职位, e.入职日期, e.一级机构名称 FROM a_sap_employee_information_chinese e JOIN a_sap_employee_education_experience_chinese edu ON e.人员工号 = edu.人员工号 WHERE e.职位 like '%技术员%' AND edu.学历 = '大学本科' AND e.雇佣状态 = '在职' LIMIT 50\n\n",
  "thoughts": "为了找到上一个财年（T127）绩效为A且学历为'大学本科'的员工，我们需要联合查询两个表：a_sap_performance_ai表和a_sap_employee_education_experience_chinese表。首先，我们会从a_sap_performance_ai表中筛选出编制年度为'T127'且绩效为'A'的员工工号。然后，我们会在a_sap_employee_education_experience_chinese表中筛选出这些员工的学历为'大学本科'的记录。最后，我们将这些信息与a_sap_employee_information_chinese表连接，以获取员工的姓名、雇佣状态和人员工号。我们会使用INNER JOIN来连接这些表，并限制结果数量为50。",
  "sql": "SELECT e.姓名, edu.学历, e.雇佣状态, e.人员工号 FROM a_sap_performance_ai p INNER JOIN a_sap_employee_education_experience_chinese edu ON p.人员工号 = edu.人员工号 INNER JOIN a_sap_employee_information_chinese e ON p.人员工号 = e.人员工号 WHERE p.编制年度 = 'T127' AND p.绩效 = 'A' AND edu.学历 = '大学本科' LIMIT 50",
  "ai_sql_result": "&quot;: [{&quot;姓名&quot;: &quot;赵阳雨&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 114238, {&quot;姓名&quot;: &quot;贺代德&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 113551, {&quot;姓名&quot;: &quot;吴克成&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 109856, {&quot;姓名&quot;: &quot;袁正杰&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 110081, {&quot;姓名&quot;: &quot;彭继&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 104329, {&quot;姓名&quot;: &quot;林文阵&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 105305, {&quot;姓名&quot;: &quot;梁海涛&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 114350, {&quot;姓名&quot;: &quot;余兴禄&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 104648, {&quot;姓名&quot;: &quot;王春耕&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 113866, {&quot;姓名&quot;: &quot;向立蛟&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 107678, {&quot;姓名&quot;: &quot;李高飞&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 117849, {&quot;姓名&quot;: &quot;焦双双&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 116914, {&quot;姓名&quot;: &quot;刘青平&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 118461, {&quot;姓名&quot;: &quot;周蓉&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 124268, {&quot;姓名&quot;: &quot;郭林生&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 117049, {&quot;姓名&quot;: &quot;刘可轩&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 114393, {&quot;姓名&quot;: &quot;李智现&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 168213, {&quot;姓名&quot;: &quot;何琳&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 126588, {&quot;姓名&quot;: &quot;姜波&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 123284, {&quot;姓名&quot;: &quot;赵婷婷&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 123150, {&quot;姓名&quot;: &quot;王译冉&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 122530, {&quot;姓名&quot;: &quot;刘林辉&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 123650, {&quot;姓名&quot;: &quot;郑家座&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 129026, {&quot;姓名&quot;: &quot;罗剑锋&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 128268, {&quot;姓名&quot;: &quot;季忠良&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 135073, {&quot;姓名&quot;: &quot;李增海&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 137451, {&quot;姓名&quot;: &quot;蒲世燕&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 142122, {&quot;姓名&quot;: &quot;林敏&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 134621, {&quot;姓名&quot;: &quot;任六一&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 140763, {&quot;姓名&quot;: &quot;闫瑞&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 135795, {&quot;姓名&quot;: &quot;潘素&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 137910, {&quot;姓名&quot;: &quot;谢贤欢&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 161712, {&quot;姓名&quot;: &quot;文祥静&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 146684, {&quot;姓名&quot;: &quot;梁迎春&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 146531, {&quot;姓名&quot;: &quot;曾婧&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 151421, {&quot;姓名&quot;: &quot;周前进&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 148186, {&quot;姓名&quot;: &quot;吴谢禄&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 141146, {&quot;姓名&quot;: &quot;唐耀宗&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 147139, {&quot;姓名&quot;: &quot;薛?&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 146965, {&quot;姓名&quot;: &quot;杨百顺&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 151027, {&quot;姓名&quot;: &quot;冯纯丰&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 111098, {&quot;姓名&quot;: &quot;乔富辉&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 118468, {&quot;姓名&quot;: &quot;廖群超&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 100264, {&quot;姓名&quot;: &quot;池小芳&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 118040, {&quot;姓名&quot;: &quot;张思远&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 161564, {&quot;姓名&quot;: &quot;张家明&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;离职&quot;, &quot;人员工号&quot;: 127397, {&quot;姓名&quot;: &quot;黄淑娴&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 129335, {&quot;姓名&quot;: &quot;汪庆&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 123130, {&quot;姓名&quot;: &quot;王倩&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 123182, {&quot;姓名&quot;: &quot;王诗豪&quot;, &quot;学历&quot;: &quot;大学本科&quot;, &quot;雇佣状态&quot;: &quot;在职&quot;, &quot;人员工号&quot;: 127038 "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "请统计当前所有在职员工的最高学历分布情况，要求显示学历名称及对应的在职员工数量，按员工数量降序排序。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_employee_education_experience_chinese`(这个是公司每个员工受教育经历的数据表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `开始日期` '受教育的开始日期', `结束日期` '受教育的结束日期', `学历` '值：[\"硕士\",\"高中\",\"大学专科\",\"博士\",\"初中及以下\",\"大学本科\",\"中专\"]', `教育类型`, `院校_培训机构`, `国家`, `证书`, `第一专业`]",
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]"
  ],
  "extend_info": [
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'parent_org': 'HR', 'shortname': 'O&TD', 'fullname': 'Organization&Talent Development', 'chinesename': '组织与人才发展部'}",
    "{'shortname': 'HR', 'fullname': 'Human Resources', 'chinesename': '人力资源部'}",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}",
    "{'parent_org': 'HR', 'shortname': 'OM', 'fullname': 'Oversea Management', 'chinesename': '海外管理部'}",
    "{'parent_org': 'HR', 'shortname': 'TR', 'fullname': 'Total Rewards', 'chinesename': '薪酬与激励部'}"
  ],
  "display_type": "response_bar_chart",
  "qa_samples": "\t用户输入1：当前具有硕士及以上学历的员工总数是多少？\n\tsql1：select count(*) from a_sap_employee_information_chinese aseic  join a_sap_employee_education_experience_chinese aseeec  on aseic.人员工号 = aseeec.人员工号 where aseic.雇佣状态 ='在职' and aseeec.学历  IN ('硕士', '博士')\n\n\t用户输入2：查询员工中持有硕士及以上学位员工的数量占比。\n\tsql2：SELECT (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese WHERE 学历 IN ('硕士', '博士'))::FLOAT / (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese)::FLOAT AS master_and_above_ratio\n\n\t用户输入3：当前在职的员工中，有多少人的最高学历是博士？\n\tsql3：SELECT COUNT(DISTINCT eie.人员工号) AS 博士学历人数 FROM a_sap_employee_information_chinese AS eii JOIN a_sap_employee_education_experience_chinese AS eie ON eii.人员工号 = eie.人员工号 WHERE eii.雇佣状态 = '在职' AND eie.学历 = '博士' AND eie.结束日期 IN (     SELECT MAX(结束日期)     FROM a_sap_employee_education_experience_chinese     GROUP BY 人员工号 ) LIMIT 50;\n\n\t用户输入4：公司中具有硕士学历及以上且目前在职的员工有多少？\n\tsql4：SELECT COUNT(DISTINCT e.人员工号) FROM a_sap_employee_information_chinese e JOIN a_sap_employee_education_experience_chinese ed ON e.人员工号 = ed.人员工号 WHERE e.雇佣状态 = '在职' AND ed.学历 IN ('硕士', '博士')\n\n\t用户输入5：统计目前公司每个一级机构下各个职务的人数分布情况。\n\tsql5：SELECT 一级机构名称, 职务名称, COUNT(*) AS 人数 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称, 职务名称 ORDER BY 一级机构名称, 职务名称 LIMIT 50\n\n\t用户输入6：当前有多少员工具备硕士学历？\n\tsql6：SELECT COUNT(DISTINCT 人员工号) FROM a_sap_employee_education_experience_chinese WHERE 学历 = '硕士';\n\n",
  "thoughts": "首先，我们需要联合两张表：员工基本信息表（a_sap_employee_information_chinese）和员工教育经历表（a_sap_employee_education_experience_chinese）。我们将通过人员工号来联合这两张表。然后，我们需要筛选出在职员工的记录（雇佣状态为'在职'）。接着，我们需要对每个员工的最高学历进行统计，这需要我们先找出每个员工的最高学历记录（即结束日期最晚的记录）。最后，我们将按照学历进行分组，并计算每个学历组下在职员工的数量，按照这个数量降序排序。我们可以使用子查询来实现找出每个员工的最高学历记录，然后再进行分组统计。",
  "sql": "SELECT eee.学历, COUNT(*) AS 在职员工数量 FROM a_sap_employee_information_chinese eic JOIN a_sap_employee_education_experience_chinese eee ON eic.人员工号 = eee.人员工号 WHERE eic.雇佣状态 = '在职' AND eee.结束日期 IN (SELECT MAX(结束日期) FROM a_sap_employee_education_experience_chinese GROUP BY 人员工号) GROUP BY eee.学历 ORDER BY 在职员工数量 DESC LIMIT 50",
  "ai_sql_result": "&quot;: [{&quot;学历&quot;: &quot;初中及以下&quot;, &quot;在职员工数量&quot;: 11998, {&quot;学历&quot;: &quot;高中&quot;, &quot;在职员工数量&quot;: 3917, {&quot;学历&quot;: &quot;大学本科&quot;, &quot;在职员工数量&quot;: 2684, {&quot;学历&quot;: &quot;大学专科&quot;, &quot;在职员工数量&quot;: 2479, {&quot;学历&quot;: &quot;中专&quot;, &quot;在职员工数量&quot;: 2186, {&quot;学历&quot;: &quot;硕士&quot;, &quot;在职员工数量&quot;: 50, {&quot;学历&quot;: &quot;博士&quot;, &quot;在职员工数量&quot;: 7 "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "查找当前在职员工中，哪个二级机构拥有最多经理级别的员工，列出这个二级机构的名称和员工数量。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]"
  ],
  "extend_info": [
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "{'parent_org': 'FNC', 'shortname': 'OMO', 'fullname': 'Operation management office', 'chinesename': '经营管理部'}",
    "{'parent_org': 'HR', 'shortname': 'OPS', 'fullname': 'Operation Center', 'chinesename': '运营中心'}",
    "{'parent_org': 'PRD', 'shortname': 'PRD-MC&TC', 'fullname': 'Management Center & Training Center', 'chinesename': '公共业务组'}",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}",
    "{'parent_org': 'HR', 'shortname': 'OM', 'fullname': 'Oversea Management', 'chinesename': '海外管理部'}",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：请查询当前在职的所有'二级员工'的姓名和人员编号。\n\tsql1：SELECT 姓名, 人员工号 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' AND 员工子组文本 = '二级员工' LIMIT 50;\n\n\t用户输入2：找出所有具有管理角色（即是否管理机构为'是'）的员工名单和他们管理的二级机构和三级机构的数量。\n\tsql2：SELECT 姓名, COUNT(DISTINCT 二级机构) AS 二级机构数量, COUNT(DISTINCT 三级机构) AS 三级机构数量 FROM a_sap_reporting_relationship_chinese WHERE 是否管理机构 = '是' GROUP BY 姓名 ORDER BY 姓名 LIMIT 50\n\n\t用户输入3：目前哪个职位的员工数量最多？\n\tsql3：select 职位,count(*) as 数量 from a_sap_employee_information_chinese  group by 职位 order by 数量 desc\n\n\t用户输入4：当前有多少个职位在AI二级机构下空缺，并需要招聘的人数。\n\tsql4：SELECT COUNT(*) AS 职位空缺数量, SUM(有效编制空缺) AS 需要招聘的人数 FROM a_sap_staffing_recruitment_plan_chinese WHERE 二级机构 = 'AI'\n\n\t用户输入5：哪个一级机构下的在职员工人数最多？\n\tsql5：SELECT 一级机构名称, COUNT(*) AS 在职员工数量 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称 ORDER BY 在职员工数量 DESC LIMIT 1\n\n\t用户输入6：统计每个一级机构下，直属上司姓名为'张三'的员工所在的二级机构及员工数。\n\tsql6：SELECT 一级机构, 二级机构, COUNT(人员工号) AS 员工数 FROM a_sap_reporting_relationship_chinese WHERE 直属上司姓名 = '张三' GROUP BY 一级机构, 二级机构 ORDER BY 一级机构, 二级机构 LIMIT 50\n\n",
  "thoughts": "首先，我们需要在员工信息表中筛选出在职状态的员工。然后，我们需要根据职务名称来识别经理级别的员工。由于背景知识中提到经理职务名称包含‘主任工程师|资深主任工程师|经理|资深经理’，我们将使用这些关键词来过滤出经理级别的员工。接着，我们将按照二级机构分组并计算每个二级机构下的经理级别员工数量。最后，我们将这些组按照员工数量降序排序，并限制结果为最多50个。",
  "sql": "SELECT 二级机构, COUNT(*) AS 经理级别员工数量 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' AND (职务名称 LIKE '%主任工程师%' OR 职务名称 LIKE '%经理%') GROUP BY 二级机构 ORDER BY 经理级别员工数量 DESC LIMIT 1",
  "ai_sql_result": "&quot;: [{&quot;二级机构&quot;: null, &quot;经理级别员工数量&quot;: 47 "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "在最新的财年中，哪个一级机构的职位空缺率最高，且至少有2个以上的空缺数？（职位空缺率 = 有效编制空缺数 / 年度编制数量）",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_staffing_recruitment_plan_chinese`(这个是公司各个部门（一级机构），小组（二级机构、三级机构），在每个编制年度(财年)/编制月度的招聘计划表。),Columns:[`编制年度` '公司的财年，值为\"TXXX\",其中XXX是数字，例如:[\"T126\",\"T127\",\"T128\"]', `编制月度` '公司财年中的月度，值有:[1,2,3,4,...,12]', `员工子组` '员工等级组别，值有[\"A1\",\"A2\",\"A3\",\"A4\",\"A5\"]，其中A5级别最高', `有效编制空缺`, `创建日期`, `年度可申请空缺数量`, `季度可申请空缺数量`, `月度可申请空缺数量`, `年度编制数量`, `季度编制数量`, `月度编制数量`, `特批编制数量`, `拟在职人数`, `有效但是没有报到空缺数`, `写入日期`, `open数`, `关闭数`, `冻结数`, `集团名称`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职级范围`]"
  ],
  "extend_info": [
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'parent_org': 'NPP', 'shortname': 'NFP/EI/Scrap', 'fullname': 'New Facility Project/Engineering/Scrap','chinesename': '工程类物料采购组'}",
    "{'parent_org': 'FNC', 'shortname': 'COE', 'fullname': 'Center of Excellent', 'chinesename': '专业财务中心'}",
    "{'parent_org': 'SLS', 'shortname': 'BO/CS', 'fullname': 'Back office/Customer Service', 'chinesename': '销售支持/客服'}",
    "{'shortname': 'HR', 'fullname': 'Human Resources', 'chinesename': '人力资源部'}",
    "{'parent_org': 'QMC', 'shortname': 'FQC/OQC', 'fullname': 'Final Quality Control/Outgoing Quality Control','chinesename': '最终/出货质量控制组'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：公司哪个一级机构的管理岗位空缺率最高，并列出该机构的管理岗位空缺数和总编制数？\n\tsql1：SELECT 一级机构, SUM(有效编制空缺) AS 管理岗位空缺数, SUM(年度编制数量) AS 总编制数, (SUM(有效编制空缺)::FLOAT / SUM(年度编制数量)) AS 空缺率 FROM a_sap_staffing_recruitment_plan_chinese WHERE 员工子组 IN ('A4', 'A5') GROUP BY 一级机构 ORDER BY 空缺率 DESC LIMIT 1\n\n\t用户输入2：哪个职级范围的有效编制空缺数最多，以及该职级范围各一级机构下的空缺数分布情况是怎样的？\n\tsql2：['SELECT 职级范围, SUM(有效编制空缺) AS 总有效编制空缺数 FROM a_sap_staffing_recruitment_plan_chinese GROUP BY 职级范围 ORDER BY 总有效编制空缺数 DESC LIMIT 1;', 'SELECT 一级机构, 职级范围, 有效编制空缺 FROM a_sap_staffing_recruitment_plan_chinese WHERE 职级范围 = (SELECT 职级范围 FROM a_sap_staffing_recruitment_plan_chinese GROUP BY 职级范围 ORDER BY SUM(有效编制空缺) DESC LIMIT 1) ORDER BY 一级机构;']\n\n\t用户输入3：哪个部门的有效编制空缺数量最多？\n\tsql3：SELECT 一级机构, SUM(有效编制空缺) AS 总有效编制空缺 FROM a_sap_staffing_recruitment_plan_chinese GROUP BY 一级机构 ORDER BY 总有效编制空缺 DESC LIMIT 1\n\n\t用户输入4：今年的有效编制空缺数是多少？\n\tsql4：SELECT SUM(有效编制空缺) AS 今年有效编制空缺数 FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T128'\n\n\t用户输入5：哪个一级机构下的在职员工人数最多？\n\tsql5：SELECT 一级机构名称, COUNT(*) AS 在职员工数量 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称 ORDER BY 在职员工数量 DESC LIMIT 1\n\n\t用户输入6：我们想知道当前有多少个职位是空缺的，即有效编制空缺大于0的职位。\n\tsql6：SELECT COUNT(*) FROM a_sap_staffing_recruitment_plan_chinese WHERE 有效编制空缺 > 0;\n\n",
  "thoughts": "首先，我们需要确定最新的财年，根据提供的背景知识，T127对应2022年，T128对应2023年，所以最新的财年是T128。接下来，我们需要计算每个一级机构的职位空缺率，并且确保有效编制空缺数至少为2。我们可以通过对表a_sap_staffing_recruitment_plan_chinese进行聚合查询来实现，首先筛选出编制年度为T128的数据，然后对一级机构进行分组，计算每个一级机构的有效编制空缺数和年度编制数量，再计算空缺率，并按照空缺率降序排列，最后筛选出有效编制空缺数至少为2的记录。",
  "sql": "SELECT 一级机构, SUM(有效编制空缺) AS 有效编制空缺数, SUM(年度编制数量) AS 年度编制数量, (SUM(有效编制空缺)::FLOAT / NULLIF(SUM(年度编制数量), 0)) AS 职位空缺率 FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T128' GROUP BY 一级机构 HAVING SUM(有效编制空缺) > 2 ORDER BY 职位空缺率 DESC LIMIT 1",
  "ai_sql_result": "&quot;: [{&quot;一级机构&quot;: &quot;PSO&quot;, &quot;有效编制空缺数&quot;: 62, &quot;年度编制数量&quot;: 62, &quot;职位空缺率&quot;: 1.0 "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "请找出目前所有在职员工中，拥有研究生学历，目前属于经理级别，并在上个季度至少管理过5名下属的员工名单。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_staffing_recruitment_plan_chinese`(这个是公司各个部门（一级机构），小组（二级机构、三级机构），在每个编制年度(财年)/编制月度的招聘计划表。),Columns:[`编制年度` '公司的财年，值为\"TXXX\",其中XXX是数字，例如:[\"T126\",\"T127\",\"T128\"]', `编制月度` '公司财年中的月度，值有:[1,2,3,4,...,12]', `员工子组` '员工等级组别，值有[\"A1\",\"A2\",\"A3\",\"A4\",\"A5\"]，其中A5级别最高', `有效编制空缺`, `创建日期`, `年度可申请空缺数量`, `季度可申请空缺数量`, `月度可申请空缺数量`, `年度编制数量`, `季度编制数量`, `月度编制数量`, `特批编制数量`, `拟在职人数`, `有效但是没有报到空缺数`, `写入日期`, `open数`, `关闭数`, `冻结数`, `集团名称`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职级范围`]",
    "Table:`a_sap_reporting_relationship_chinese`(这个是公司每个员工汇报关系表。),Columns:[`开始日期` '汇报关系开始的时间', `结束日期` '汇报关系结束的时间', `人员工号` '该表主键，每个员工的唯一id值。', `姓名`, `入司日期`, `工作性质` '值为：[\"全职-计算\",\"挂职\",\"兼职-不计算\",\"劳务外包\"]', `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"idt\",\"apd\",\"hr\",\"qa\",\"fe\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"ai\",\"ad\",\"cpa\",\"ta\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"emc\",\"ipqc\",\"ph\",\"ep-m\"]等等', `是否管理机构` '该员工是否是部门（一级机构），小组（二级机构，三级机构）负责人。值为：[\"是\",\"否\"]', `主管1姓名`, `主管1职位`, `主管1职务`, `主管2姓名`, `主管2职位`, `主管2职务`, `经理1姓名`, `经理1职位`, `经理1职务`, `经理2姓名`, `经理2职位`, `经理2职务`, `经理3姓名`, `经理3职位`, `经理3职务`, `经理4姓名`, `经理4职位`, `经理4职务`, `总监1姓名`, `总监1职位`, `总监1职务`, `总监2姓名`, `总监2职位`, `总监2职务`, `总监3姓名`, `总监3职位`, `总监3职务`, `总监4姓名`, `总监4职位`, `总监4职务`, `一级机构负责人姓名`, `一级机构负责人职位`, `一级机构负责人职务`]",
    "Table:`a_sap_positions_responsibilities_risks_chinese`(这个是公司每个岗位的责任和风险，以及绩效贡献标准等等表。),Columns:[`集团`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"idt\",\"apd\",\"hr\",\"qa\",\"fe\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"ai\",\"ad\",\"cpa\",\"ta\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"emc\",\"ipqc\",\"ph\",\"ep-m\"]等等', `职位`, `成本类别名称` '岗位的成本类别，值有：[\"mgr.above\",\"idl\",\"staff\",\"dl\"]', `岗位名称`, `岗位属性名称`, `角色定位`, `岗位风险点`, `岗位职责`, `岗位任职资格`, `绩效贡献`, `经验及其他资质要求`, `部门职能类型名称` '值有：[\"工程\",\"研发\",\"运营\",\"支持\",\"销售\",\"质量\",\"其它\",\"atl\"]', `职务`, `职务类型` '值为：[\"p1-技术类\",\"f4-文职类\",\"技术类\",\"实习\",\"f2-操作类\",\"p2-非技术类\",\"m-管理类\",\"f3-现场管理类\",\"f1-现场技术类\"]', `现职人数`]",
    "Table:`a_sap_employee_education_experience_chinese`(这个是公司每个员工受教育经历的数据表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `开始日期` '受教育的开始日期', `结束日期` '受教育的结束日期', `学历` '值：[\"硕士\",\"高中\",\"大学专科\",\"博士\",\"初中及以下\",\"大学本科\",\"中专\"]', `教育类型`, `院校_培训机构`, `国家`, `证书`, `第一专业`]"
  ],
  "extend_info": [
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "{'parent_org': 'EHS-ND', 'shortname': 'Site-R&PTO','fullname': 'Environment,Health and Safety  Site Management(Research Institute&PTO)','chinesename': '研究院&PTO现场管理组'}",
    "{'parent_org': 'RI', 'shortname': 'RCM', 'fullname': 'Research cooperation Management', 'chinesename': '研发管理部'}",
    "{'parent_org': 'CPP', 'shortname': 'IMG', 'fullname': 'Investment Management', 'chinesename': '投资管理组'}",
    "{'parent_org': 'CPD', 'shortname': 'CMO', 'fullname': 'CPD Management Office', 'chinesename': 'CPD管理办公室'}",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'parent_org': 'APD', 'shortname': 'AMO', 'fullname': 'APD Management Office', 'chinesename': 'APD管理办公室'}"
  ],
  "display_type": "Table",
  "qa_samples": "\t用户输入1：请列出目前我公司管理层（假设为职务名称包含'经理'或'总监'）中，拥有硕士及以上学历的员工列表。\n\tsql1：SELECT DISTINCT r.人员工号, r.姓名, r.职务名称, e.学历 FROM a_sap_reporting_relationship_chinese r INNER JOIN a_sap_employee_education_experience_chinese e ON r.人员工号 = e.人员工号 WHERE (r.职务名称 LIKE '%经理%' OR r.职务名称 LIKE '%总监%') AND e.学历 IN ('硕士', '博士') LIMIT 50\n\n\t用户输入2：查询员工中持有硕士及以上学位员工的数量占比。\n\tsql2：SELECT (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese WHERE 学历 IN ('硕士', '博士'))::FLOAT / (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese)::FLOAT AS master_and_above_ratio\n\n\t用户输入3：请查询所有在APD部门任职'经理'级别且拥有硕士学历的员工的姓名、职务名称和入职日期。\n\tsql3：SELECT e.姓名, e.职务名称, e.入职日期 FROM a_sap_employee_information_chinese e INNER JOIN a_sap_employee_education_experience_chinese edu ON e.人员工号 = edu.人员工号 WHERE e.一级机构名称 = 'APD' AND (e.职务名称 LIKE '%主任%' OR e.职务名称 LIKE '%经理%') AND edu.学历 = '硕士' LIMIT 50\n\n\t用户输入4：公司中具有硕士学历及以上且目前在职的员工有多少？\n\tsql4：SELECT COUNT(DISTINCT e.人员工号) FROM a_sap_employee_information_chinese e JOIN a_sap_employee_education_experience_chinese ed ON e.人员工号 = ed.人员工号 WHERE e.雇佣状态 = '在职' AND ed.学历 IN ('硕士', '博士')\n\n\t用户输入5：查找目前所有'总监'级别的员工姓名、部门和职位。\n\tsql5：SELECT 姓名, 一级机构 AS 部门, 职位 FROM a_sap_reporting_relationship_chinese WHERE 职务名称 LIKE '%总工%' OR 职务名称 LIKE '%专家%' OR 职务名称 LIKE '%总监%' LIMIT 50;\n\n\t用户输入6：查找公司中拥有硕士学历的员工数量？\n\tsql6：SELECT COUNT(DISTINCT 人员工号) AS 硕士学历员工数量 FROM a_sap_employee_education_experience_chinese WHERE 学历 = '硕士';\n\n",
  "thoughts": "为了找出所有在职员工中，拥有研究生学历，目前属于经理级别，并在上个季度至少管理过5名下属的员工名单，我们需要从员工教育经历表中筛选出拥有研究生学历的员工，然后从员工汇报关系表中筛选出目前属于经理级别的员工，最后需要确定这些员工在上个季度至少管理过5名下属。这里有一个问题，即当前表结构定义中没有直接关于员工管理下属数量的信息。此外，也没有提供员工当前在职状态的信息。因此，提供的表结构信息不足以生成sql查询。",
  "sql": "",
  "ai_sql_result": "为了找出所有在职员工中，拥有研究生学历，目前属于经理级别，并在上个季度至少管理过5名下属的员工名单，我们需要从员工教育经历表中筛选出拥有研究生学历的员工，然后从员工汇报关系表中筛选出目前属于经理级别的员工，最后需要确定这些员工在上个季度至少管理过5名下属。这里有一个问题，即当前表结构定义中没有直接关于员工管理下属数量的信息。此外，也没有提供员工当前在职状态的信息。因此，提供的表结构信息不足以生成sql查询。"
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "计算当前在职员工平均工龄，并对比上一财年此时的平均工龄是否有所增长？（工龄 = 当前时间 - 开始参加工作日期）",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]"
  ],
  "extend_info": [
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}",
    "{'parent_org': 'ME-ND1', 'shortname': 'ME-ASSY1', 'fullname': 'ME-ASSY1', 'chinesename': '装配一'}",
    "{'parent_org': 'ES', 'shortname': 'ES-DG', 'fullname': 'Employee Service-DG', 'chinesename': '东莞雇员服务部'}",
    "{'parent_org': 'HR', 'shortname': 'TR', 'fullname': 'Total Rewards', 'chinesename': '薪酬与激励部'}",
    "{'parent_org': 'ES', 'shortname': 'ES-ND', 'fullname': 'Employee Service-ND', 'chinesename': '宁德雇员服务部'}",
    "{'shortname': 'HR', 'fullname': 'Human Resources', 'chinesename': '人力资源部'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：列出当前在职员工的平均工龄。\n\tsql1：SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均工龄 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职'\n\n\t用户输入2：统计当前全部员工的平均入职年限。\n\tsql2：SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均入职年限 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职'\n\n\t用户输入3：对于每个职位，当前有多少员工从事，并且他们的平均入职时长是多少（只计算在职员工）？\n\tsql3：SELECT 职位, COUNT(*) AS 员工数量, AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均入职时长 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 职位 LIMIT 50\n\n\t用户输入4：公司全职员工中,哪个岗位的员工平均工龄最大？\n\tsql4：SELECT 职位, AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均工龄 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 职位 ORDER BY 平均工龄 DESC LIMIT 1\n\n\t用户输入5：我们想知道目前公司总共有多少雇员处于正式雇佣状态。\n\tsql5：SELECT COUNT(*) FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职';\n\n\t用户输入6：查询'技术员'这一员工子组中个人的最新入职日期。\n\tsql6：SELECT 入职日期 FROM a_sap_employee_information_chinese WHERE 员工子组文本 = '二级员工'  and 入职日期 is not null ORDER BY 入职日期 DESC LIMIT 1\n\n",
  "thoughts": "为了计算当前在职员工的平均工龄，我们需要从员工信息表中筛选出在职员工，并计算他们的平均工龄。然后，我们需要计算上一财年此时的在职员工平均工龄，最后对比这两个平均值以确定是否有增长。我们将使用PostgreSQL的AGE函数来计算工龄，并使用EXTRACT函数来提取年份。当前财年是T128，所以上一财年是T127，对应的年份是2022年。我们将把当前日期和上一财年的同一天作为参考点来计算平均工龄。",
  "sql": "WITH Current_Avg_Tenure AS ( SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 开始参加工作日期))) AS current_avg_tenure FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' ), Last_Fiscal_Year_Avg_Tenure AS ( SELECT AVG(EXTRACT(YEAR FROM AGE(DATE_TRUNC('year', CURRENT_DATE) - INTERVAL '1 year', 开始参加工作日期))) AS last_fiscal_year_avg_tenure FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' AND 开始参加工作日期 <= DATE_TRUNC('year', CURRENT_DATE) - INTERVAL '1 year' ) SELECT current_avg_tenure, last_fiscal_year_avg_tenure, (current_avg_tenure - last_fiscal_year_avg_tenure) AS growth FROM Current_Avg_Tenure, Last_Fiscal_Year_Avg_Tenure LIMIT 1",
  "ai_sql_result": "&quot;: [{&quot;current_avg_tenure&quot;: 10.1563160118, &quot;last_fiscal_year_avg_tenure&quot;: 9.0906779661, &quot;growth&quot;: 1.0656380457 "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "在上一季度中，哪个一级机构下的所有二级机构平均招聘关闭数最多？（考虑只有发布过招聘的二级机构）",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_staffing_recruitment_plan_chinese`(这个是公司各个部门（一级机构），小组（二级机构、三级机构），在每个编制年度(财年)/编制月度的招聘计划表。),Columns:[`编制年度` '公司的财年，值为\"TXXX\",其中XXX是数字，例如:[\"T126\",\"T127\",\"T128\"]', `编制月度` '公司财年中的月度，值有:[1,2,3,4,...,12]', `员工子组` '员工等级组别，值有[\"A1\",\"A2\",\"A3\",\"A4\",\"A5\"]，其中A5级别最高', `有效编制空缺`, `创建日期`, `年度可申请空缺数量`, `季度可申请空缺数量`, `月度可申请空缺数量`, `年度编制数量`, `季度编制数量`, `月度编制数量`, `特批编制数量`, `拟在职人数`, `有效但是没有报到空缺数`, `写入日期`, `open数`, `关闭数`, `冻结数`, `集团名称`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职级范围`]"
  ],
  "extend_info": [
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'shortname': 'HR', 'fullname': 'Human Resources', 'chinesename': '人力资源部'}",
    "{'parent_org': 'HR', 'shortname': 'OPS', 'fullname': 'Operation Center', 'chinesename': '运营中心'}",
    "{'parent_org': 'HR', 'shortname': 'OM', 'fullname': 'Oversea Management', 'chinesename': '海外管理部'}",
    "{'parent_org': 'HR', 'shortname': 'O&TD', 'fullname': 'Organization&Talent Development', 'chinesename': '组织与人才发展部'}",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}"
  ],
  "display_type": "response_line_chart:used to display comparative trend analysis data\nresponse_pie_chart:suitable for scenarios such as proportion and distribution statistics\nresponse_table:suitable for display with many display columns or non-numeric columns\nresponse_scatter_plot:Suitable for exploring relationships between variables, detecting outliers, etc.\nresponse_bubble_chart:Suitable for relationships between multiple variables, highlighting outliers or special situations, etc.\nresponse_donut_chart:Suitable for hierarchical structure representation, category proportion display and highlighting key categories, etc.\nresponse_area_chart:Suitable for visualization of time series data, comparison of multiple groups of data, analysis of data change trends, etc.\nresponse_heatmap:Suitable for visual analysis of time series data, large-scale data sets, distribution of classified data, etc.",
  "qa_samples": "\t用户输入1：哪个一级机构下的在职员工人数最多？\n\tsql1：SELECT 一级机构名称, COUNT(*) AS 在职员工数量 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称 ORDER BY 在职员工数量 DESC LIMIT 1\n\n\t用户输入2：公司哪个一级机构的管理岗位空缺率最高，并列出该机构的管理岗位空缺数和总编制数？\n\tsql2：SELECT 一级机构, SUM(有效编制空缺) AS 管理岗位空缺数, SUM(年度编制数量) AS 总编制数, (SUM(有效编制空缺)::FLOAT / SUM(年度编制数量)) AS 空缺率 FROM a_sap_staffing_recruitment_plan_chinese WHERE 员工子组 IN ('A4', 'A5') GROUP BY 一级机构 ORDER BY 空缺率 DESC LIMIT 1\n\n\t用户输入3：当前有多少个职位在AI二级机构下空缺，并需要招聘的人数。\n\tsql3：SELECT COUNT(*) AS 职位空缺数量, SUM(有效编制空缺) AS 需要招聘的人数 FROM a_sap_staffing_recruitment_plan_chinese WHERE 二级机构 = 'AI'\n\n\t用户输入4：统计目前公司每个一级机构下各个职务的人数分布情况。\n\tsql4：SELECT 一级机构名称, 职务名称, COUNT(*) AS 人数 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称, 职务名称 ORDER BY 一级机构名称, 职务名称 LIMIT 50\n\n\t用户输入5：公司今年第二季度的有效编制空缺数量是多少？\n\tsql5：SELECT SUM(有效编制空缺) AS 第二季度有效编制空缺总数 FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T128' AND 编制月度 IN (7, 8, 9)\n\n\t用户输入6：哪个职级范围的有效编制空缺数最多，以及该职级范围各一级机构下的空缺数分布情况是怎样的？\n\tsql6：['SELECT 职级范围, SUM(有效编制空缺) AS 总有效编制空缺数 FROM a_sap_staffing_recruitment_plan_chinese GROUP BY 职级范围 ORDER BY 总有效编制空缺数 DESC LIMIT 1;', 'SELECT 一级机构, 职级范围, 有效编制空缺 FROM a_sap_staffing_recruitment_plan_chinese WHERE 职级范围 = (SELECT 职级范围 FROM a_sap_staffing_recruitment_plan_chinese GROUP BY 职级范围 ORDER BY SUM(有效编制空缺) DESC LIMIT 1) ORDER BY 一级机构;']\n\n"
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "根据员工基础信息表中员工的入职日期，计算各一级机构的平均工龄，并列出平均工龄超过5年的一级机构名称及其平均工龄。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]"
  ],
  "extend_info": [
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "{'parent_org': 'ES', 'shortname': 'ES-DG', 'fullname': 'Employee Service-DG', 'chinesename': '东莞雇员服务部'}",
    "{'shortname': 'IDT', 'fullname': 'Information Digital Technology',  'chinesename': '信息数字化技术部'}",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}",
    "{'parent_org': 'HR', 'shortname': 'OM', 'fullname': 'Oversea Management', 'chinesename': '海外管理部'}",
    "{'parent_org': 'ES', 'shortname': 'ES-ND', 'fullname': 'Employee Service-ND', 'chinesename': '宁德雇员服务部'}",
    "{'parent_org': 'HR', 'shortname': 'TR', 'fullname': 'Total Rewards', 'chinesename': '薪酬与激励部'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：列出当前在职员工的平均工龄。\n\tsql1：SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均工龄 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职'\n\n\t用户输入2：统计当前全部员工的平均入职年限。\n\tsql2：SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均入职年限 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职'\n\n\t用户输入3：请问每个一级机构内部的各个岗位平均入职年限是多少年，且按照从高到低排序？\n\tsql3：SELECT 一级机构名称, 职位, AVG(DATE_PART('year', CURRENT_DATE) - DATE_PART('year', CAST(入职日期 AS DATE))) AS 平均入职年限 FROM a_sap_employee_information_chinese where 一级机构名称 is not null and  职位 is not null GROUP BY 一级机构名称, 职位 ORDER BY 平均入职年限 DESC LIMIT 50\n\n\t用户输入4：统计目前公司每个一级机构下各个职务的人数分布情况。\n\tsql4：SELECT 一级机构名称, 职务名称, COUNT(*) AS 人数 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称, 职务名称 ORDER BY 一级机构名称, 职务名称 LIMIT 50\n\n\t用户输入5：公司全职员工中,哪个岗位的员工平均工龄最大？\n\tsql5：SELECT 职位, AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均工龄 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 职位 ORDER BY 平均工龄 DESC LIMIT 1\n\n\t用户输入6：提供一个报告，显示所有在T127年内入职的员工，他们的姓名、入职日期和部门，按入职日期升序排序。\n\tsql6：SELECT 姓名, 入职日期, 一级机构名称 FROM a_sap_employee_information_chinese WHERE 入职日期::text LIKE '2021%' ORDER BY 入职日期 ASC LIMIT 50\n\n",
  "thoughts": "首先，我们需要计算每个员工的工龄，这可以通过当前日期减去员工的入职日期来实现。然后，我们将按一级机构分组，计算每个一级机构内员工工龄的平均值。最后，我们将选择那些平均工龄超过5年的一级机构，并返回它们的名称和平均工龄。我们将使用SQL的DATE_PART函数来计算年份差，并使用AVG函数来计算平均值。我们还将使用HAVING子句来过滤出平均工龄超过5年的一级机构。",
  "sql": "SELECT 一级机构, AVG(DATE_PART('year', AGE(CURRENT_DATE, 入职日期))) AS 平均工龄 FROM a_sap_employee_information_chinese GROUP BY 一级机构 HAVING AVG(DATE_PART('year', AGE(CURRENT_DATE, 入职日期))) > 5 LIMIT 50",
  "ai_sql_result": "&quot;: [{&quot;一级机构&quot;: null, &quot;平均工龄&quot;: 10.0952380952, {&quot;一级机构&quot;: &quot;MRD&quot;, &quot;平均工龄&quot;: 5.6445147679, {&quot;一级机构&quot;: &quot;FE&quot;, &quot;平均工龄&quot;: 6.5905660377, {&quot;一级机构&quot;: &quot;CJR&quot;, &quot;平均工龄&quot;: 5.173553719, {&quot;一级机构&quot;: &quot;CL&quot;, &quot;平均工龄&quot;: 6.326619965, {&quot;一级机构&quot;: &quot;OS&quot;, &quot;平均工龄&quot;: 5.55, {&quot;一级机构&quot;: &quot;CPD&quot;, &quot;平均工龄&quot;: 6.2961672474, {&quot;一级机构&quot;: &quot;Corp.QA&quot;, &quot;平均工龄&quot;: 5.3823529412, {&quot;一级机构&quot;: &quot;TPM&quot;, &quot;平均工龄&quot;: 6.4936708861, {&quot;一级机构&quot;: &quot;SLS&quot;, &quot;平均工龄&quot;: 9.0116959064, {&quot;一级机构&quot;: &quot;EHS&quot;, &quot;平均工龄&quot;: 8.6301369863, {&quot;一级机构&quot;: &quot;SLS&amp;MKT&quot;, &quot;平均工龄&quot;: 5.1428571429, {&quot;一级机构&quot;: &quot;LOG&quot;, &quot;平均工龄&quot;: 7.1657142857, {&quot;一级机构&quot;: &quot;ATLI&quot;, &quot;平均工龄&quot;: 5.3576642336, {&quot;一级机构&quot;: &quot;FNC&quot;, &quot;平均工龄&quot;: 5.5470588235, {&quot;一级机构&quot;: &quot;RI&quot;, &quot;平均工龄&quot;: 7.6120218579, {&quot;一级机构&quot;: &quot;EPA&amp;IT&quot;, &quot;平均工龄&quot;: 5.2314814815, {&quot;一级机构&quot;: &quot;MU-SSL&quot;, &quot;平均工龄&quot;: 7.1039665324, {&quot;一级机构&quot;: &quot;PA&quot;, &quot;平均工龄&quot;: 6.0, {&quot;一级机构&quot;: &quot;BCM&quot;, &quot;平均工龄&quot;: 10.0, {&quot;一级机构&quot;: &quot;ES&quot;, &quot;平均工龄&quot;: 7.5096153846, {&quot;一级机构&quot;: &quot;MDE&quot;, &quot;平均工龄&quot;: 5.1666666667, {&quot;一级机构&quot;: &quot;IT&quot;, &quot;平均工龄&quot;: 9.8333333333, {&quot;一级机构&quot;: &quot;PLM&quot;, &quot;平均工龄&quot;: 6.45, {&quot;一级机构&quot;: &quot;HR&quot;, &quot;平均工龄&quot;: 5.8509803922, {&quot;一级机构&quot;: &quot;SEC&quot;, &quot;平均工龄&quot;: 7.4753713839, {&quot;一级机构&quot;: &quot;SRC&quot;, &quot;平均工龄&quot;: 6.3243243243 "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "找出当前在职的员工中持有'硕士'学历但未在技术类职务工作的员工姓名和职务名称，并且统计这样的员工数量。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_employee_education_experience_chinese`(这个是公司每个员工受教育经历的数据表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `开始日期` '受教育的开始日期', `结束日期` '受教育的结束日期', `学历` '值：[\"硕士\",\"高中\",\"大学专科\",\"博士\",\"初中及以下\",\"大学本科\",\"中专\"]', `教育类型`, `院校_培训机构`, `国家`, `证书`, `第一专业`]",
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]",
    "Table:`a_sap_positions_responsibilities_risks_chinese`(这个是公司每个岗位的责任和风险，以及绩效贡献标准等等表。),Columns:[`集团`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"idt\",\"apd\",\"hr\",\"qa\",\"fe\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"ai\",\"ad\",\"cpa\",\"ta\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"emc\",\"ipqc\",\"ph\",\"ep-m\"]等等', `职位`, `成本类别名称` '岗位的成本类别，值有：[\"mgr.above\",\"idl\",\"staff\",\"dl\"]', `岗位名称`, `岗位属性名称`, `角色定位`, `岗位风险点`, `岗位职责`, `岗位任职资格`, `绩效贡献`, `经验及其他资质要求`, `部门职能类型名称` '值有：[\"工程\",\"研发\",\"运营\",\"支持\",\"销售\",\"质量\",\"其它\",\"atl\"]', `职务`, `职务类型` '值为：[\"p1-技术类\",\"f4-文职类\",\"技术类\",\"实习\",\"f2-操作类\",\"p2-非技术类\",\"m-管理类\",\"f3-现场管理类\",\"f1-现场技术类\"]', `现职人数`]"
  ],
  "extend_info": [
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'shortname': 'HR', 'fullname': 'Human Resources', 'chinesename': '人力资源部'}",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}",
    "{'parent_org': 'ES', 'shortname': 'ES-ND', 'fullname': 'Employee Service-ND', 'chinesename': '宁德雇员服务部'}",
    "{'parent_org': 'HR', 'shortname': 'O&TD', 'fullname': 'Organization&Talent Development', 'chinesename': '组织与人才发展部'}",
    "{'parent_org': 'PMD', 'shortname': 'MKT', 'fullname': 'Marketing', 'chinesename': '市场部'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：查询员工中持有硕士及以上学位员工的数量占比。\n\tsql1：SELECT (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese WHERE 学历 IN ('硕士', '博士'))::FLOAT / (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese)::FLOAT AS master_and_above_ratio\n\n\t用户输入2：查找公司中拥有硕士学历的员工数量？\n\tsql2：SELECT COUNT(DISTINCT 人员工号) AS 硕士学历员工数量 FROM a_sap_employee_education_experience_chinese WHERE 学历 = '硕士';\n\n\t用户输入3：当前有多少员工具备硕士学历？\n\tsql3：SELECT COUNT(DISTINCT 人员工号) FROM a_sap_employee_education_experience_chinese WHERE 学历 = '硕士';\n\n\t用户输入4：我们需要找出在职状态为'在职'且最高学历为'博士'的员工名单。\n\tsql4：SELECT DISTINCT e.姓名 FROM a_sap_employee_information_chinese e INNER JOIN a_sap_employee_education_experience_chinese ed ON e.人员工号 = ed.人员工号 WHERE e.雇佣状态 = '在职' AND ed.学历 = '博士' LIMIT 50\n\n\t用户输入5：当前具有硕士及以上学历的员工总数是多少？\n\tsql5：select count(*) from a_sap_employee_information_chinese aseic  join a_sap_employee_education_experience_chinese aseeec  on aseic.人员工号 = aseeec.人员工号 where aseic.雇佣状态 ='在职' and aseeec.学历  IN ('硕士', '博士')\n\n\t用户输入6：公司中具有硕士学历及以上且目前在职的员工有多少？\n\tsql6：SELECT COUNT(DISTINCT e.人员工号) FROM a_sap_employee_information_chinese e JOIN a_sap_employee_education_experience_chinese ed ON e.人员工号 = ed.人员工号 WHERE e.雇佣状态 = '在职' AND ed.学历 IN ('硕士', '博士')\n\n",
  "thoughts": "首先，我们需要从员工基本信息表(a_sap_employee_information_chinese)中找出在职的员工，然后根据人员工号关联员工教育经历表(a_sap_employee_education_experience_chinese)，筛选出持有'硕士'学历的员工。接着，我们需要排除在技术类职务工作的员工，根据背景知识，技术类职务的员工子组文本为['技术员', '资深技术员', '工程师', '资深工程师']，对应的员工子组为[A2, A3]。最后，我们统计这样的员工数量。",
  "sql": "SELECT e.姓名, e.职务名称 FROM a_sap_employee_information_chinese e JOIN a_sap_employee_education_experience_chinese ed ON e.人员工号 = ed.人员工号 WHERE e.雇佣状态 = '在职' AND ed.学历 = '硕士' AND e.员工子组文本 NOT IN ('二级员工', '三级员工') LIMIT 50; SELECT COUNT(DISTINCT e.人员工号) AS 非技术类硕士学历在职员工数量 FROM a_sap_employee_information_chinese e JOIN a_sap_employee_education_experience_chinese ed ON e.人员工号 = ed.人员工号 WHERE e.雇佣状态 = '在职' AND ed.学历 = '硕士' AND e.员工子组文本 NOT IN ('二级员工', '三级员工')",
  "ai_sql_result": "&quot;: [{&quot;非技术类硕士学历在职员工数量&quot;: 11 "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "对于每个一级机构，找出财年T128中，实际在职人数与年度编制数量的差额，并列出差额最高的三个一级机构。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_staffing_recruitment_plan_chinese`(这个是公司各个部门（一级机构），小组（二级机构、三级机构），在每个编制年度(财年)/编制月度的招聘计划表。),Columns:[`编制年度` '公司的财年，值为\"TXXX\",其中XXX是数字，例如:[\"T126\",\"T127\",\"T128\"]', `编制月度` '公司财年中的月度，值有:[1,2,3,4,...,12]', `员工子组` '员工等级组别，值有[\"A1\",\"A2\",\"A3\",\"A4\",\"A5\"]，其中A5级别最高', `有效编制空缺`, `创建日期`, `年度可申请空缺数量`, `季度可申请空缺数量`, `月度可申请空缺数量`, `年度编制数量`, `季度编制数量`, `月度编制数量`, `特批编制数量`, `拟在职人数`, `有效但是没有报到空缺数`, `写入日期`, `open数`, `关闭数`, `冻结数`, `集团名称`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职级范围`]",
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]"
  ],
  "extend_info": [
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "{'parent_org': 'HR', 'shortname': 'TR', 'fullname': 'Total Rewards', 'chinesename': '薪酬与激励部'}",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'parent_org': 'HR', 'shortname': 'O&TD', 'fullname': 'Organization&Talent Development', 'chinesename': '组织与人才发展部'}",
    "{'shortname': 'PMC', 'fullname': 'Plan & Material Control', 'chinesename': '计划与物料控制部'}",
    "{'parent_org': 'FNC', 'shortname': 'COE', 'fullname': 'Center of Excellent', 'chinesename': '专业财务中心'}",
    "{'parent_org': 'PSO', 'shortname': 'CPA', 'fullname': 'Corporate public affairs', 'chinesename': '企业公共事务部'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：对于T128财年，查询在'AD'二级机构中，编制月度为'3'月，员工子组为'技术员'的有效编制空缺数。\n\tsql1：SELECT 有效编制空缺 FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T128' AND 二级机构 = 'AD' AND 编制月度 = 3 AND 员工子组 = '技术员' LIMIT 50\n\n\t用户输入2：统计每个一级机构下，直属上司姓名为'张三'的员工所在的二级机构及员工数。\n\tsql2：SELECT 一级机构, 二级机构, COUNT(人员工号) AS 员工数 FROM a_sap_reporting_relationship_chinese WHERE 直属上司姓名 = '张三' GROUP BY 一级机构, 二级机构 ORDER BY 一级机构, 二级机构 LIMIT 50\n\n\t用户输入3：统计目前公司每个一级机构下各个职务的人数分布情况。\n\tsql3：SELECT 一级机构名称, 职务名称, COUNT(*) AS 人数 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称, 职务名称 ORDER BY 一级机构名称, 职务名称 LIMIT 50\n\n\t用户输入4：需要生成一份报告，列出所有三级机构，以及每个三级机构下拥有的职务类型总数。\n\tsql4：SELECT 三级机构, COUNT(DISTINCT 职务类型) AS 职务类型总数 FROM a_sap_positions_responsibilities_risks_chinese GROUP BY 三级机构 ORDER BY 三级机构 LIMIT 50;\n\n\t用户输入5：哪个一级机构在T128年度内增加了最多的特批编制数量？\n\tsql5：SELECT 一级机构, SUM(特批编制数量) AS total_special_quota FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T128' GROUP BY 一级机构 ORDER BY total_special_quota DESC LIMIT 1\n\n\t用户输入6：找出所有具有管理角色（即是否管理机构为'是'）的员工名单和他们管理的二级机构和三级机构的数量。\n\tsql6：SELECT 姓名, COUNT(DISTINCT 二级机构) AS 二级机构数量, COUNT(DISTINCT 三级机构) AS 三级机构数量 FROM a_sap_reporting_relationship_chinese WHERE 是否管理机构 = '是' GROUP BY 姓名 ORDER BY 姓名 LIMIT 50\n\n",
  "thoughts": "为了找出每个一级机构在财年T128中的实际在职人数与年度编制数量的差额，我们需要两步操作：\n1. 从a_sap_employee_information_chinese表中统计每个一级机构的在职人数。\n2. 从a_sap_staffing_recruitment_plan_chinese表中获取每个一级机构的年度编制数量。\n然后我们将这两个结果按一级机构进行关联，并计算差额。最后，我们选择差额最高的三个一级机构进行展示。",
  "sql": "WITH Staffing AS (\n  SELECT 一级机构, SUM(年度编制数量) AS 年度编制总数\n  FROM a_sap_staffing_recruitment_plan_chinese\n  WHERE 编制年度 = 'T128'\n  GROUP BY 一级机构\n),\nEmployment AS (\n  SELECT 一级机构, COUNT(人员工号) AS 在职人数\n  FROM a_sap_employee_information_chinese\n  WHERE 雇佣状态 = '在职'\n  GROUP BY 一级机构\n)\nSELECT\n  Employment.一级机构,\n  Staffing.年度编制总数 - Employment.在职人数 AS 编制差额\nFROM Staffing\nJOIN Employment ON Staffing.一级机构 = Employment.一级机构\nORDER BY 编制差额 DESC\nLIMIT 3",
  "ai_sql_result": "&quot;: [{&quot;一级机构&quot;: &quot;ME&quot;, &quot;编制差额&quot;: 1795, {&quot;一级机构&quot;: &quot;PTO&quot;, &quot;编制差额&quot;: 1096, {&quot;一级机构&quot;: &quot;RD&quot;, &quot;编制差额&quot;: 1040 "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "找出那些有多于1个直属上司的员工，并列出他们的姓名、职务名称以及直属上司的姓名和职务。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]",
    "Table:`a_sap_reporting_relationship_chinese`(这个是公司每个员工汇报关系表。),Columns:[`开始日期` '汇报关系开始的时间', `结束日期` '汇报关系结束的时间', `人员工号` '该表主键，每个员工的唯一id值。', `姓名`, `入司日期`, `工作性质` '值为：[\"全职-计算\",\"挂职\",\"兼职-不计算\",\"劳务外包\"]', `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"idt\",\"apd\",\"hr\",\"qa\",\"fe\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"ai\",\"ad\",\"cpa\",\"ta\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"emc\",\"ipqc\",\"ph\",\"ep-m\"]等等', `是否管理机构` '该员工是否是部门（一级机构），小组（二级机构，三级机构）负责人。值为：[\"是\",\"否\"]', `主管1姓名`, `主管1职位`, `主管1职务`, `主管2姓名`, `主管2职位`, `主管2职务`, `经理1姓名`, `经理1职位`, `经理1职务`, `经理2姓名`, `经理2职位`, `经理2职务`, `经理3姓名`, `经理3职位`, `经理3职务`, `经理4姓名`, `经理4职位`, `经理4职务`, `总监1姓名`, `总监1职位`, `总监1职务`, `总监2姓名`, `总监2职位`, `总监2职务`, `总监3姓名`, `总监3职位`, `总监3职务`, `总监4姓名`, `总监4职位`, `总监4职务`, `一级机构负责人姓名`, `一级机构负责人职位`, `一级机构负责人职务`]"
  ],
  "extend_info": [
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'parent_org': 'DMP', 'shortname': 'CP1', 'fullname': 'Category Procurement Department 1','chinesename': '品类采购1部'}",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}",
    "{'parent_org': 'SLS', 'shortname': 'K1', 'fullname': 'Key Account1', 'chinesename': '关键客户1'}",
    "{'parent_org': 'HR', 'shortname': 'O&TD', 'fullname': 'Organization&Talent Development', 'chinesename': '组织与人才发展部'}",
    "{'parent_org': 'SLS', 'shortname': 'AP1A', 'fullname': 'Asia Pacific1-1', 'chinesename': '亚太区1A'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：请列出所有员工的姓名和对应的直属上司姓名，并按照部门分类。\n\tsql1：SELECT e.姓名, e.直属上司姓名, e.一级机构名称 FROM a_sap_employee_information_chinese e ORDER BY e.一级机构名称 LIMIT 50\n\n\t用户输入2：统计每个一级机构下，直属上司姓名为'张三'的员工所在的二级机构及员工数。\n\tsql2：SELECT 一级机构, 二级机构, COUNT(人员工号) AS 员工数 FROM a_sap_reporting_relationship_chinese WHERE 直属上司姓名 = '张三' GROUP BY 一级机构, 二级机构 ORDER BY 一级机构, 二级机构 LIMIT 50\n\n\t用户输入3：找出所有在CPD一级机构工作，且直属上司职务为'总监'级别的员工信息。\n\tsql3：SELECT e.* FROM a_sap_employee_information_chinese e INNER JOIN a_sap_reporting_relationship_chinese r ON e.直属上司工号 = r.人员工号 WHERE e.一级机构名称 = 'CPD' AND r.职务名称 LIKE '%总监%' LIMIT 50\n\n\t用户输入4：找出所有具有管理角色（即是否管理机构为'是'）的员工名单和他们管理的二级机构和三级机构的数量。\n\tsql4：SELECT 姓名, COUNT(DISTINCT 二级机构) AS 二级机构数量, COUNT(DISTINCT 三级机构) AS 三级机构数量 FROM a_sap_reporting_relationship_chinese WHERE 是否管理机构 = '是' GROUP BY 姓名 ORDER BY 姓名 LIMIT 50\n\n\t用户输入5：统计目前公司每个一级机构下各个职务的人数分布情况。\n\tsql5：SELECT 一级机构名称, 职务名称, COUNT(*) AS 人数 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称, 职务名称 ORDER BY 一级机构名称, 职务名称 LIMIT 50\n\n\t用户输入6：查找目前所有'总监'级别的员工姓名、部门和职位。\n\tsql6：SELECT 姓名, 一级机构 AS 部门, 职位 FROM a_sap_reporting_relationship_chinese WHERE 职务名称 LIKE '%总工%' OR 职务名称 LIKE '%专家%' OR 职务名称 LIKE '%总监%' LIMIT 50;\n\n",
  "thoughts": "为了找出有多于1个直属上司的员工，我们需要对员工信息表进行分组，并计算每个员工的直属上司数量。然后，我们可以筛选出直属上司数量大于1的员工，并联合员工信息表，获取他们的姓名和职务名称。最后，我们需要联合汇报关系表，以获取他们直属上司的姓名和职务。",
  "sql": "SELECT e.姓名, e.职务名称, r.直属上司姓名, r.直属上司职务 FROM (SELECT 人员工号, COUNT(DISTINCT 直属上司工号) AS 上司数量 FROM a_sap_employee_information_chinese GROUP BY 人员工号 HAVING COUNT(DISTINCT 直属上司工号) > 1) AS sub INNER JOIN a_sap_employee_information_chinese e ON sub.人员工号 = e.人员工号 INNER JOIN a_sap_reporting_relationship_chinese r ON e.人员工号 = r.人员工号 LIMIT 50",
  "ai_sql_result": "&quot;: [] "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "统计每个一级机构在最近一个完整的季度中工程师层级在职员工的平均工龄，并找出平均工龄最高的部门。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]"
  ],
  "extend_info": [
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "{'parent_org': 'QA', 'shortname': 'QE', 'fullname': 'Quality Engineering', 'chinesename': '质量工程部'}",
    "{'parent_org': 'HR', 'shortname': 'TR', 'fullname': 'Total Rewards', 'chinesename': '薪酬与激励部'}",
    "{'parent_org': 'QE', 'shortname': 'TQE', 'fullname': 'Technology Quality Engineering','chinesename': '技术品质工程组'}",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}",
    "{'parent_org': 'QA', 'shortname': 'RSE', 'fullname': 'Reliability  Safety Engineering', 'chinesename': '安全可靠性工程部'}",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}"
  ],
  "display_type": "response_line_chart:used to display comparative trend analysis data\nresponse_pie_chart:suitable for scenarios such as proportion and distribution statistics\nresponse_table:suitable for display with many display columns or non-numeric columns\nresponse_scatter_plot:Suitable for exploring relationships between variables, detecting outliers, etc.\nresponse_bubble_chart:Suitable for relationships between multiple variables, highlighting outliers or special situations, etc.\nresponse_donut_chart:Suitable for hierarchical structure representation, category proportion display and highlighting key categories, etc.\nresponse_area_chart:Suitable for visualization of time series data, comparison of multiple groups of data, analysis of data change trends, etc.\nresponse_heatmap:Suitable for visual analysis of time series data, large-scale data sets, distribution of classified data, etc.",
  "qa_samples": "\t用户输入1：统计目前公司每个一级机构下各个职务的人数分布情况。\n\tsql1：SELECT 一级机构名称, 职务名称, COUNT(*) AS 人数 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称, 职务名称 ORDER BY 一级机构名称, 职务名称 LIMIT 50\n\n\t用户输入2：统计当前全部员工的平均入职年限。\n\tsql2：SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均入职年限 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职'\n\n\t用户输入3：找出所有在CPD一级机构工作，且直属上司职务为'总监'级别的员工信息。\n\tsql3：SELECT e.* FROM a_sap_employee_information_chinese e INNER JOIN a_sap_reporting_relationship_chinese r ON e.直属上司工号 = r.人员工号 WHERE e.一级机构名称 = 'CPD' AND r.职务名称 LIKE '%总监%' LIMIT 50\n\n\t用户输入4：列出当前在职员工的平均工龄。\n\tsql4：SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均工龄 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职'\n\n\t用户输入5：查找目前所有'总监'级别的员工姓名、部门和职位。\n\tsql5：SELECT 姓名, 一级机构 AS 部门, 职位 FROM a_sap_reporting_relationship_chinese WHERE 职务名称 LIKE '%总工%' OR 职务名称 LIKE '%专家%' OR 职务名称 LIKE '%总监%' LIMIT 50;\n\n\t用户输入6：查询员工中持有硕士及以上学位员工的数量占比。\n\tsql6：SELECT (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese WHERE 学历 IN ('硕士', '博士'))::FLOAT / (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese)::FLOAT AS master_and_above_ratio\n\n"
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "请列出在过去的财年中（T127），在所有一级机构中，每个机构哪个二级机构的平均员工工龄最高，并且需要过滤掉员工雇佣状态为'离职'的数据。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]"
  ],
  "extend_info": [
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}",
    "{'parent_org': 'IDT', 'shortname': 'DP', 'fullname': 'Data Platform', 'chinesename': '数据平台部'}",
    "{'parent_org': 'ES', 'shortname': 'ES-ND', 'fullname': 'Employee Service-ND', 'chinesename': '宁德雇员服务部'}",
    "{'parent_org': 'HR', 'shortname': 'TR', 'fullname': 'Total Rewards', 'chinesename': '薪酬与激励部'}",
    "{'parent_org': 'ES', 'shortname': 'ES-DG', 'fullname': 'Employee Service-DG', 'chinesename': '东莞雇员服务部'}",
    "{'parent_org': 'HR', 'shortname': 'OM', 'fullname': 'Oversea Management', 'chinesename': '海外管理部'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：列出当前在职员工的平均工龄。\n\tsql1：SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均工龄 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职'\n\n\t用户输入2：统计当前全部员工的平均入职年限。\n\tsql2：SELECT AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均入职年限 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职'\n\n\t用户输入3：请问每个一级机构内部的各个岗位平均入职年限是多少年，且按照从高到低排序？\n\tsql3：SELECT 一级机构名称, 职位, AVG(DATE_PART('year', CURRENT_DATE) - DATE_PART('year', CAST(入职日期 AS DATE))) AS 平均入职年限 FROM a_sap_employee_information_chinese where 一级机构名称 is not null and  职位 is not null GROUP BY 一级机构名称, 职位 ORDER BY 平均入职年限 DESC LIMIT 50\n\n\t用户输入4：统计目前公司每个一级机构下各个职务的人数分布情况。\n\tsql4：SELECT 一级机构名称, 职务名称, COUNT(*) AS 人数 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称, 职务名称 ORDER BY 一级机构名称, 职务名称 LIMIT 50\n\n\t用户输入5：哪个一级机构下的在职员工人数最多？\n\tsql5：SELECT 一级机构名称, COUNT(*) AS 在职员工数量 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称 ORDER BY 在职员工数量 DESC LIMIT 1\n\n\t用户输入6：公司全职员工中,哪个岗位的员工平均工龄最大？\n\tsql6：SELECT 职位, AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 入职日期))) AS 平均工龄 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 职位 ORDER BY 平均工龄 DESC LIMIT 1\n\n",
  "thoughts": "首先，我们需要确定T127财年对应的日期范围，根据背景知识，T127对应2022年。然后我们需要计算每个员工的工龄，这可以通过当前日期减去员工的开始参加工作日期来实现。接下来，我们需要对雇佣状态为'在职'的员工进行过滤，并且按照一级机构和二级机构进行分组，计算每个二级机构的平均工龄。最后，我们需要选择每个一级机构中平均工龄最高的二级机构。由于SQL查询中不能直接选择每个分组中的最大值，我们需要使用窗口函数来计算每个一级机构下工龄最高的二级机构。我们将使用PARTITION BY子句来对每个一级机构进行分区，并使用ORDER BY子句来按平均工龄降序排列，然后选择每个分区中的第一行。",
  "sql": "WITH RankedOrgs AS (\n  SELECT\n    一级机构,\n    二级机构,\n    AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 开始参加工作日期))) AS 平均工龄,\n    RANK() OVER (PARTITION BY 一级机构 ORDER BY AVG(EXTRACT(YEAR FROM AGE(CURRENT_DATE, 开始参加工作日期))) DESC) AS rank\n  FROM\n    a_sap_employee_information_chinese\n  WHERE\n    雇佣状态 = '在职'\n    AND EXTRACT(YEAR FROM 开始参加工作日期) <= 2022\n  GROUP BY\n    一级机构,\n    二级机构\n)\nSELECT\n  一级机构,\n  二级机构,\n  平均工龄\nFROM\n  RankedOrgs\nWHERE\n  rank = 1\nLIMIT 50",
  "ai_sql_result": "&quot;: [{&quot;一级机构&quot;: &quot;3S&quot;, &quot;二级机构&quot;: &quot;SD&quot;, &quot;平均工龄&quot;: 6.0, {&quot;一级机构&quot;: &quot;APD&quot;, &quot;二级机构&quot;: &quot;AMO&quot;, &quot;平均工龄&quot;: 8.0, {&quot;一级机构&quot;: &quot;ATLI&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 27.0, {&quot;一级机构&quot;: &quot;BOCS&quot;, &quot;二级机构&quot;: &quot;CS&quot;, &quot;平均工龄&quot;: 10.0, {&quot;一级机构&quot;: &quot;CATL-SCM&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 1.8, {&quot;一级机构&quot;: &quot;CL&quot;, &quot;二级机构&quot;: &quot;CLO&quot;, &quot;平均工龄&quot;: 10.0, {&quot;一级机构&quot;: &quot;CPD&quot;, &quot;二级机构&quot;: &quot;PPL&quot;, &quot;平均工龄&quot;: 10.0, {&quot;一级机构&quot;: &quot;CPP&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 29.0, {&quot;一级机构&quot;: &quot;ENG&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 15.0, {&quot;一级机构&quot;: &quot;EPA&amp;IT&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 4.5, {&quot;一级机构&quot;: &quot;ES&quot;, &quot;二级机构&quot;: &quot;ES-ND&quot;, &quot;平均工龄&quot;: 16.2666666667, {&quot;一级机构&quot;: &quot;ESS-SPP&quot;, &quot;二级机构&quot;: &quot;ESS-SLS&quot;, &quot;平均工龄&quot;: 13.0, {&quot;一级机构&quot;: &quot;FE&quot;, &quot;二级机构&quot;: &quot;FOM&quot;, &quot;平均工龄&quot;: 14.8461538462, {&quot;一级机构&quot;: &quot;FNC&quot;, &quot;二级机构&quot;: &quot;OMO&quot;, &quot;平均工龄&quot;: 11.1111111111, {&quot;一级机构&quot;: &quot;HR&quot;, &quot;二级机构&quot;: &quot;O&amp;TD&quot;, &quot;平均工龄&quot;: 13.8, {&quot;一级机构&quot;: &quot;IDT&quot;, &quot;二级机构&quot;: &quot;IS&quot;, &quot;平均工龄&quot;: 14.125, {&quot;一级机构&quot;: &quot;IE&quot;, &quot;二级机构&quot;: &quot;Cell &amp; Resource&quot;, &quot;平均工龄&quot;: 16.0, {&quot;一级机构&quot;: &quot;IP&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 9.9285714286, {&quot;一级机构&quot;: &quot;LA&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 13.0, {&quot;一级机构&quot;: &quot;LA&amp;CS&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 2.0, {&quot;一级机构&quot;: &quot;LOG&quot;, &quot;二级机构&quot;: &quot;LOG-DG&quot;, &quot;平均工龄&quot;: 19.5, {&quot;一级机构&quot;: &quot;ME&quot;, &quot;二级机构&quot;: &quot;ME-ND3&quot;, &quot;平均工龄&quot;: 14.4, {&quot;一级机构&quot;: &quot;MEV-SPP&quot;, &quot;二级机构&quot;: &quot;MEV-PM&quot;, &quot;平均工龄&quot;: 17.0, {&quot;一级机构&quot;: &quot;MFG&quot;, &quot;二级机构&quot;: &quot;MS&quot;, &quot;平均工龄&quot;: 7.8181818182, {&quot;一级机构&quot;: &quot;MKT&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 10.0, {&quot;一级机构&quot;: &quot;MRD&quot;, &quot;二级机构&quot;: &quot;AMD&quot;, &quot;平均工龄&quot;: 12.1923076923, {&quot;一级机构&quot;: &quot;MU Plus&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 22.0, {&quot;一级机构&quot;: &quot;MU-SSL&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 30.0, {&quot;一级机构&quot;: &quot;NVT-FE&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 1.0, {&quot;一级机构&quot;: &quot;NVT-NVT&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 3.0, {&quot;一级机构&quot;: &quot;OPS&quot;, &quot;二级机构&quot;: &quot;PRD&quot;, &quot;平均工龄&quot;: 6.04, {&quot;一级机构&quot;: &quot;PLM&quot;, &quot;二级机构&quot;: &quot;ESS TPM&quot;, &quot;平均工龄&quot;: 18.0, {&quot;一级机构&quot;: &quot;PMC&quot;, &quot;二级机构&quot;: &quot;PMC-PC&quot;, &quot;平均工龄&quot;: 15.5333333333, {&quot;一级机构&quot;: &quot;PMD&quot;, &quot;二级机构&quot;: &quot;PPD&quot;, &quot;平均工龄&quot;: 9.0, {&quot;一级机构&quot;: &quot;PPD-SPP&quot;, &quot;二级机构&quot;: &quot;PPD-SLS&quot;, &quot;平均工龄&quot;: 12.5, {&quot;一级机构&quot;: &quot;PRD&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 28.0, {&quot;一级机构&quot;: &quot;PRJ&quot;, &quot;二级机构&quot;: &quot;PRJ-DG&quot;, &quot;平均工龄&quot;: 12.75, {&quot;一级机构&quot;: &quot;PSCM&quot;, &quot;二级机构&quot;: &quot;Pack&quot;, &quot;平均工龄&quot;: 11.0, {&quot;一级机构&quot;: &quot;PSO&quot;, &quot;二级机构&quot;: &quot;CPA&quot;, &quot;平均工龄&quot;: 14.0, {&quot;一级机构&quot;: &quot;PSO&quot;, &quot;二级机构&quot;: &quot;STE&quot;, &quot;平均工龄&quot;: 14.0, {&quot;一级机构&quot;: &quot;PTO&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 28.0, {&quot;一级机构&quot;: &quot;QA&quot;, &quot;二级机构&quot;: &quot;QMC&quot;, &quot;平均工龄&quot;: 15.0416666667, {&quot;一级机构&quot;: &quot;RD&quot;, &quot;二级机构&quot;: &quot;PD&quot;, &quot;平均工龄&quot;: 10.0, {&quot;一级机构&quot;: &quot;RI&quot;, &quot;二级机构&quot;: &quot;RIO&quot;, &quot;平均工龄&quot;: 12.4, {&quot;一级机构&quot;: &quot;SD&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 31.0, {&quot;一级机构&quot;: &quot;SEC&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 16.3333333333, {&quot;一级机构&quot;: &quot;SLS&quot;, &quot;二级机构&quot;: &quot;BO&quot;, &quot;平均工龄&quot;: 18.0, {&quot;一级机构&quot;: &quot;SLS&amp;MKT&quot;, &quot;二级机构&quot;: null, &quot;平均工龄&quot;: 5.0, {&quot;一级机构&quot;: &quot;SRC&quot;, &quot;二级机构&quot;: &quot;PCO&quot;, &quot;平均工龄&quot;: 12.8, {&quot;一级机构&quot;: &quot;TPM&quot;, &quot;二级机构&quot;: &quot;TPM4&quot;, &quot;平均工龄&quot;: 12.3333333333 "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "在当前年份（2023年）中，哪个一级机构的员工平均绩效得分最低？请列出该机构的名称及其平均绩效得分，并且请考虑到绩效得分'A'到'D'依次递减。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_performance_ai`(这个是公司每个员工每个财年的绩效表),Columns:[`编制年度` '公司财年', `姓名`, `人员工号`, `绩效` '绩效排序（好->差）:[\"A\",\"B+\",\"B\",\"B-\",\"C\",\"D\"]']"
  ],
  "extend_info": [
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "{'parent_org': 'PRD', 'shortname': 'PRD-MC&TC', 'fullname': 'Management Center & Training Center', 'chinesename': '公共业务组'}",
    "{'parent_org': 'DMP', 'shortname': 'Costing&D.A', 'fullname': 'Costing&Data Analysis', 'chinesename': '成本组'}",
    "{'parent_org': 'QA', 'shortname': 'QE', 'fullname': 'Quality Engineering', 'chinesename': '质量工程部'}",
    "{'parent_org': 'PRJ', 'shortname': 'PRJ-NDPAP', 'fullname': 'PRJ-NDPAP', 'chinesename': 'PRJ-ND A客户项目部'}",
    "{'parent_org': 'CPD', 'shortname': 'PAP', 'fullname': 'PAP - PLT and NPI Development', 'chinesename': 'A客户项目部'}",
    "{'shortname': 'QA', 'fullname': 'Quality Assurance', 'chinesename': '品质保证部'}"
  ],
  "display_type": "Table",
  "qa_samples": "\t用户输入1：统计目前公司每个一级机构下各个职务的人数分布情况。\n\tsql1：SELECT 一级机构名称, 职务名称, COUNT(*) AS 人数 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称, 职务名称 ORDER BY 一级机构名称, 职务名称 LIMIT 50\n\n\t用户输入2：请问每个一级机构内部的各个岗位平均入职年限是多少年，且按照从高到低排序？\n\tsql2：SELECT 一级机构名称, 职位, AVG(DATE_PART('year', CURRENT_DATE) - DATE_PART('year', CAST(入职日期 AS DATE))) AS 平均入职年限 FROM a_sap_employee_information_chinese where 一级机构名称 is not null and  职位 is not null GROUP BY 一级机构名称, 职位 ORDER BY 平均入职年限 DESC LIMIT 50\n\n\t用户输入3：请列出目前所有一级机构的名称以及下属的总监职位的人员姓名。\n\tsql3：SELECT 一级机构, 总监1姓名, 总监2姓名, 总监3姓名, 总监4姓名 FROM a_sap_reporting_relationship_chinese WHERE 职务名称 LIKE '%总监%' LIMIT 50\n\n\t用户输入4：截至目前，公司一级机构下有多少个不同的职务？\n\tsql4：SELECT COUNT(DISTINCT 职务) FROM a_sap_positions_responsibilities_risks_chinese\n\n\t用户输入5：哪个一级机构下的在职员工人数最多？\n\tsql5：SELECT 一级机构名称, COUNT(*) AS 在职员工数量 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称 ORDER BY 在职员工数量 DESC LIMIT 1\n\n\t用户输入6：统计每个一级机构下，直属上司姓名为'张三'的员工所在的二级机构及员工数。\n\tsql6：SELECT 一级机构, 二级机构, COUNT(人员工号) AS 员工数 FROM a_sap_reporting_relationship_chinese WHERE 直属上司姓名 = '张三' GROUP BY 一级机构, 二级机构 ORDER BY 一级机构, 二级机构 LIMIT 50\n\n",
  "thoughts": "由于数据库中没有直接关联一级机构和员工绩效的表，所以无法直接查询一级机构的员工平均绩效得分。需要关联一级机构和员工绩效的相关表，但是这些表的结构没有提供，因此无法生成SQL查询。如果有这些相关表的结构信息，我们可以通过将一级机构与员工绩效表连接，并计算每个一级机构的员工绩效得分的平均值，然后根据平均值排序来找到平均绩效得分最低的一级机构。",
  "sql": "select '提供的表结构信息不足以生成 sql 查询。' as error",
  "ai_sql_result": "&quot;: [{&quot;error&quot;: &quot;提供的表结构信息不足以生成 sql 查询。&quot; "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "哪些员工在财年T127期间具有至少两种不同类型的教育背景，并且目前还在职？",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_employee_education_experience_chinese`(这个是公司每个员工受教育经历的数据表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `开始日期` '受教育的开始日期', `结束日期` '受教育的结束日期', `学历` '值：[\"硕士\",\"高中\",\"大学专科\",\"博士\",\"初中及以下\",\"大学本科\",\"中专\"]', `教育类型`, `院校_培训机构`, `国家`, `证书`, `第一专业`]",
    "Table:`a_sap_employee_information_chinese`(这个是公司每个员工基本信息表。),Columns:[`人员工号` '每个员工的唯一工号，也是这张表的主键', `姓名`, `雇佣状态` '值为：[\"在职\",\"离职\"]', `职位`, `入职日期`, `部门负责人` '该员工所属部门（一级机构）的负责人姓名', `人事范围` '值为：[\"Ampack-DG\",\"SSL\",\"SZ\",\"Poweramp\",\"Ampack\",\"BM\",\"HK\",\"ND\",\"Ampace\"]', `员工组` '值为：[\"劳务外包\",\"试用\",\"退休返聘\",\"CJR\",\"劳务派遣-正式\",\"正式\",\"劳务派遣-试用\",\"顾问\",\"实习\"]', `员工子组文本` '值为：[\"顾问\",\"实习\",\"二级员工\",\"五级员工\",\"一级员工\",\"三级员工\",\"CJR\",\"四级员工\"]', `上班地点` '值为：[\"SSL\",\"SZ(深圳)\",\"WX(无锡)\",\"XM\",\"IN\",\"BM\",\"HK\",\"SG\",\"MNO\",\"ND\",\"SSL-P\"]', `英文名`, `性别`, `国籍`, `民族`, `籍贯`, `身份证地址的省_直辖市`, `开始参加工作日期`, `员工本人联系号码`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职务名称`, `员工工作性质文本` '值为：[\"兼职-不计算\",\"劳务外包\",\"兼职-计算\",\"全职-计算\",\"挂职\"]', `直属上司工号`, `直属上司姓名`, `集团入职日期`]"
  ],
  "extend_info": [
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "{'parent_org': 'HR', 'shortname': 'TR', 'fullname': 'Total Rewards', 'chinesename': '薪酬与激励部'}",
    "{'parent_org': 'HR', 'shortname': 'O&TD', 'fullname': 'Organization&Talent Development', 'chinesename': '组织与人才发展部'}",
    "{'shortname': 'FNC', 'fullname': 'Finance', 'chinesename': '财务部'}",
    "{'parent_org': 'FNC', 'shortname': 'COE', 'fullname': 'Center of Excellent', 'chinesename': '专业财务中心'}",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'shortname': 'ES', 'fullname': 'Employee Service', 'chinesename': '雇员服务部'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：当前有多少员工具备硕士学历？\n\tsql1：SELECT COUNT(DISTINCT 人员工号) FROM a_sap_employee_education_experience_chinese WHERE 学历 = '硕士';\n\n\t用户输入2：目前哪些员工的学历为硕士，并且其所在的一级机构为FE？\n\tsql2：SELECT DISTINCT e.人员工号, e.姓名\nFROM a_sap_employee_education_experience_chinese AS edu\nJOIN a_sap_employee_information_chinese AS e ON edu.人员工号 = e.人员工号\nWHERE edu.学历 = '硕士' AND e.一级机构名称 = 'FE'\nLIMIT 50\n\n\t用户输入3：查询员工中持有硕士及以上学位员工的数量占比。\n\tsql3：SELECT (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese WHERE 学历 IN ('硕士', '博士'))::FLOAT / (SELECT COUNT(*) FROM a_sap_employee_education_experience_chinese)::FLOAT AS master_and_above_ratio\n\n\t用户输入4：当前具有硕士及以上学历的员工总数是多少？\n\tsql4：select count(*) from a_sap_employee_information_chinese aseic  join a_sap_employee_education_experience_chinese aseeec  on aseic.人员工号 = aseeec.人员工号 where aseic.雇佣状态 ='在职' and aseeec.学历  IN ('硕士', '博士')\n\n\t用户输入5：提供一个报告，显示所有在T127年内入职的员工，他们的姓名、入职日期和部门，按入职日期升序排序。\n\tsql5：SELECT 姓名, 入职日期, 一级机构名称 FROM a_sap_employee_information_chinese WHERE 入职日期::text LIKE '2021%' ORDER BY 入职日期 ASC LIMIT 50\n\n\t用户输入6：我们需要找出在职状态为'在职'且最高学历为'博士'的员工名单。\n\tsql6：SELECT DISTINCT e.姓名 FROM a_sap_employee_information_chinese e INNER JOIN a_sap_employee_education_experience_chinese ed ON e.人员工号 = ed.人员工号 WHERE e.雇佣状态 = '在职' AND ed.学历 = '博士' LIMIT 50\n\n",
  "thoughts": "首先，需要理解财年T127对应的年份是2022年。教育背景的开始日期和结束日期应该在2022年内。然后，要找到具有至少两种不同类型教育背景的员工，可以通过对教育类型进行分组和计数来实现。最后，需要确保这些员工目前的雇佣状态是'在职'。我们可以通过连接员工基本信息表和员工教育经历表，对于每个员工计算其在2022年内具有的教育类型数量，然后筛选出至少有两种教育类型的员工。",
  "sql": "SELECT e.人员工号, e.姓名 FROM a_sap_employee_education_experience_chinese AS edu INNER JOIN a_sap_employee_information_chinese AS e ON edu.人员工号 = e.人员工号 WHERE e.雇佣状态 = '在职' AND ((edu.开始日期 >= '2022-01-01' AND edu.开始日期 <= '2022-12-31') OR (edu.结束日期 >= '2022-01-01' AND edu.结束日期 <= '2022-12-31')) GROUP BY e.人员工号, e.姓名 HAVING COUNT(DISTINCT edu.教育类型) >= 2 LIMIT 50",
  "ai_sql_result": "&quot;: [] "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "在上一财年（T127）中，有哪些一级机构的招聘开放职位（open数）数量大于它们的年度编制数量？列出这些机构及其对应的差值。",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_staffing_recruitment_plan_chinese`(这个是公司各个部门（一级机构），小组（二级机构、三级机构），在每个编制年度(财年)/编制月度的招聘计划表。),Columns:[`编制年度` '公司的财年，值为\"TXXX\",其中XXX是数字，例如:[\"T126\",\"T127\",\"T128\"]', `编制月度` '公司财年中的月度，值有:[1,2,3,4,...,12]', `员工子组` '员工等级组别，值有[\"A1\",\"A2\",\"A3\",\"A4\",\"A5\"]，其中A5级别最高', `有效编制空缺`, `创建日期`, `年度可申请空缺数量`, `季度可申请空缺数量`, `月度可申请空缺数量`, `年度编制数量`, `季度编制数量`, `月度编制数量`, `特批编制数量`, `拟在职人数`, `有效但是没有报到空缺数`, `写入日期`, `open数`, `关闭数`, `冻结数`, `集团名称`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职级范围`]"
  ],
  "extend_info": [
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "职级范围字段说明:'普工'-'JG1-3', '技术员|资深技术员'-'JG4-6', '工程师|资深工程师'-'JG7-10','经理|主任|中级管理层'-'JG11-13','高级管理层'-'JG14-20';",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'parent_org': 'HR', 'shortname': 'OM', 'fullname': 'Oversea Management', 'chinesename': '海外管理部'}",
    "{'parent_org': 'HR', 'shortname': 'O&TD', 'fullname': 'Organization&Talent Development', 'chinesename': '组织与人才发展部'}",
    "{'parent_org': 'ME-ND1', 'shortname': 'ME-ASSY1', 'fullname': 'ME-ASSY1', 'chinesename': '装配一'}",
    "{'parent_org': 'PSO', 'shortname': 'CPA', 'fullname': 'Corporate public affairs', 'chinesename': '企业公共事务部'}",
    "{'parent_org': 'PRD', 'shortname': 'PRD-MC&TC', 'fullname': 'Management Center & Training Center', 'chinesename': '公共业务组'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：截至目前，公司一级机构下有多少个不同的职务？\n\tsql1：SELECT COUNT(DISTINCT 职务) FROM a_sap_positions_responsibilities_risks_chinese\n\n\t用户输入2：今年是T127，7月份，请问最近一个季度中，各一级机构的招聘编制使用率是如何？需要考虑有效编制空缺和拟在职人数。\n\tsql2：SELECT 一级机构, SUM(拟在职人数) AS 拟在职总数, SUM(有效编制空缺) AS 有效空缺总数, (SUM(拟在职人数)::FLOAT / (SUM(拟在职人数) + SUM(有效编制空缺))) AS 编制使用率 FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T127' AND 编制月度 = 7 and 一级机构 is not null GROUP BY 一级机构 ORDER BY 编制使用率 DESC LIMIT 50\n\n\t用户输入3：统计目前公司每个一级机构下各个职务的人数分布情况。\n\tsql3：SELECT 一级机构名称, 职务名称, COUNT(*) AS 人数 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称, 职务名称 ORDER BY 一级机构名称, 职务名称 LIMIT 50\n\n\t用户输入4：哪个一级机构下的在职员工人数最多？\n\tsql4：SELECT 一级机构名称, COUNT(*) AS 在职员工数量 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称 ORDER BY 在职员工数量 DESC LIMIT 1\n\n\t用户输入5：哪个一级机构在T128年度内增加了最多的特批编制数量？\n\tsql5：SELECT 一级机构, SUM(特批编制数量) AS total_special_quota FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T128' GROUP BY 一级机构 ORDER BY total_special_quota DESC LIMIT 1\n\n\t用户输入6：请问T127年度一共有多少有效的编制空缺？\n\tsql6：SELECT SUM(有效编制空缺) FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T127';\n\n",
  "thoughts": "为了找出上一财年（T127）中招聘开放职位（open数）数量大于年度编制数量的一级机构及其对应差值，我们需要从招聘计划表中筛选出编制年度为T127的记录，计算每个一级机构的年度编制数量总和和open数总和，然后比较这两个总和来确定哪些机构的open数大于年度编制数量，并计算差值。最后，我们将这些信息列出来。",
  "sql": "SELECT 一级机构, SUM(open数) - SUM(年度编制数量) AS 差值 FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T127' GROUP BY 一级机构 HAVING SUM(open数) > SUM(年度编制数量) LIMIT 50",
  "ai_sql_result": "&quot;: [] "
}
{
  "db_name": "hr_chinese_fk",
  "user_input": "哪个一级机构在第三季度（T127-Q3）的招聘关闭数（关闭数）最多，并且该机构的哪个二级机构对应的关闭数最多？",
  "top_k": "50",
  "dialect": "postgresql",
  "table_info": [
    "Table:`a_sap_staffing_recruitment_plan_chinese`(这个是公司各个部门（一级机构），小组（二级机构、三级机构），在每个编制年度(财年)/编制月度的招聘计划表。),Columns:[`编制年度` '公司的财年，值为\"TXXX\",其中XXX是数字，例如:[\"T126\",\"T127\",\"T128\"]', `编制月度` '公司财年中的月度，值有:[1,2,3,4,...,12]', `员工子组` '员工等级组别，值有[\"A1\",\"A2\",\"A3\",\"A4\",\"A5\"]，其中A5级别最高', `有效编制空缺`, `创建日期`, `年度可申请空缺数量`, `季度可申请空缺数量`, `月度可申请空缺数量`, `年度编制数量`, `季度编制数量`, `月度编制数量`, `特批编制数量`, `拟在职人数`, `有效但是没有报到空缺数`, `写入日期`, `open数`, `关闭数`, `冻结数`, `集团名称`, `一级机构` '也称为部门，值一般为英文字母组成，例如：[\"IDT\",\"APD\",\"HR\",\"QA\",\"FE\"]等', `二级机构` '也称为组，是部门下分组，例如：[\"AI\",\"AD\",\"CPA\",\"TA\"]等等', `三级机构` '也称为组，是二级机构下面的更细分的小组，例如：[\"EMC\",\"IPQC\",\"PH\",\"EP-M\"]等等', `职级范围`]"
  ],
  "extend_info": [
    "一级机构的值都是缩写，是shortname，比如:['SRC','APD','CPD','FE',...,'MU Plus'];二级机构的值都是缩写，是shortname，比如:['OMO','CSR&EHS Sys','AD','LOG-HK',...,'xTW-EP-PRD'];三级机构的值都是缩写，是shortname，比如:['PAP1','BTL-MDA','SSL-ME-ASSY2','ME-Program',...,'Site-SSL'];",
    "编制年度和财年是一个意思，字段内容有：['T125','T124','T123']；\"公司财年 Txxx 对应年份规则\":\"T127对应2022年，T128对应2023年,按此规律回答问题中的财年对应的年份\";\"季度Q(1~4)对应规则\":\"Q1-4,5,6月份,Q2-7,8,9月份,Q3-10,11,12月份,Q4-1,2,3月份\";",
    "xx组一般都是指二级机构或者三级机构，比如：AI组。指的是二级机构的shortname为AI的小组;",
    "'职务顺序,从小到大排序,':'技术员-资深技术员-职员-经理-总监-副总裁-总裁';",
    "'职员职务名称包含':'工程师';'经理职务名称包含':'主任工程师|资深主任工程师|经理|资深经理';'总监职务名称包含':'总工|专家|总监';'副总裁职务名称包含':'副总裁|副总裁|技术官|董事长';",
    "'员工子组|员工子组文本 对应的含义如下所示'：'A1|一级员工'：'普工'，'A2|二级员工'：'技术员|资深技术员'，'A3|三级员工'：'工程师|资深工程师'，'A4|四级员工'：'中层管理层'，'A5|五级员工':'高层管理层'，'挂职人员|CJR':'残疾人'，'外聘顾问'：'顾问','实习员工'：'实习'；员工子组的值为'： [A1,A2,A3,A4,A5 ]'；员工子组文本的值为'： [一级员工，二级员工，三级员工，四级员工，五级员工，CJR，顾问，实习 ]",
    "{'parent_org': 'HR', 'shortname': 'TA', 'fullname': 'Talent Acquisition', 'chinesename': '人才招聘与调配部'}",
    "{'parent_org': 'HR', 'shortname': 'OM', 'fullname': 'Oversea Management', 'chinesename': '海外管理部'}",
    "{'shortname': 'HR', 'fullname': 'Human Resources', 'chinesename': '人力资源部'}",
    "{'parent_org': 'HR', 'shortname': 'OPS', 'fullname': 'Operation Center', 'chinesename': '运营中心'}",
    "{'parent_org': 'HR', 'shortname': 'O&TD', 'fullname': 'Organization&Talent Development', 'chinesename': '组织与人才发展部'}",
    "{'parent_org': 'PRD', 'shortname': 'PRD-MC&TC', 'fullname': 'Management Center & Training Center', 'chinesename': '公共业务组'}"
  ],
  "display_type": "response_table",
  "qa_samples": "\t用户输入1：哪个一级机构下的在职员工人数最多？\n\tsql1：SELECT 一级机构名称, COUNT(*) AS 在职员工数量 FROM a_sap_employee_information_chinese WHERE 雇佣状态 = '在职' GROUP BY 一级机构名称 ORDER BY 在职员工数量 DESC LIMIT 1\n\n\t用户输入2：公司哪个一级机构的管理岗位空缺率最高，并列出该机构的管理岗位空缺数和总编制数？\n\tsql2：SELECT 一级机构, SUM(有效编制空缺) AS 管理岗位空缺数, SUM(年度编制数量) AS 总编制数, (SUM(有效编制空缺)::FLOAT / SUM(年度编制数量)) AS 空缺率 FROM a_sap_staffing_recruitment_plan_chinese WHERE 员工子组 IN ('A4', 'A5') GROUP BY 一级机构 ORDER BY 空缺率 DESC LIMIT 1\n\n\t用户输入3：今年是T127，7月份，请问最近一个季度中，各一级机构的招聘编制使用率是如何？需要考虑有效编制空缺和拟在职人数。\n\tsql3：SELECT 一级机构, SUM(拟在职人数) AS 拟在职总数, SUM(有效编制空缺) AS 有效空缺总数, (SUM(拟在职人数)::FLOAT / (SUM(拟在职人数) + SUM(有效编制空缺))) AS 编制使用率 FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T127' AND 编制月度 = 7 and 一级机构 is not null GROUP BY 一级机构 ORDER BY 编制使用率 DESC LIMIT 50\n\n\t用户输入4：哪个部门的有效编制空缺数量最多？\n\tsql4：SELECT 一级机构, SUM(有效编制空缺) AS 总有效编制空缺 FROM a_sap_staffing_recruitment_plan_chinese GROUP BY 一级机构 ORDER BY 总有效编制空缺 DESC LIMIT 1\n\n\t用户输入5：哪个职级范围的有效编制空缺数最多，以及该职级范围各一级机构下的空缺数分布情况是怎样的？\n\tsql5：['SELECT 职级范围, SUM(有效编制空缺) AS 总有效编制空缺数 FROM a_sap_staffing_recruitment_plan_chinese GROUP BY 职级范围 ORDER BY 总有效编制空缺数 DESC LIMIT 1;', 'SELECT 一级机构, 职级范围, 有效编制空缺 FROM a_sap_staffing_recruitment_plan_chinese WHERE 职级范围 = (SELECT 职级范围 FROM a_sap_staffing_recruitment_plan_chinese GROUP BY 职级范围 ORDER BY SUM(有效编制空缺) DESC LIMIT 1) ORDER BY 一级机构;']\n\n\t用户输入6：统计每个一级机构下，直属上司姓名为'张三'的员工所在的二级机构及员工数。\n\tsql6：SELECT 一级机构, 二级机构, COUNT(人员工号) AS 员工数 FROM a_sap_reporting_relationship_chinese WHERE 直属上司姓名 = '张三' GROUP BY 一级机构, 二级机构 ORDER BY 一级机构, 二级机构 LIMIT 50\n\n",
  "thoughts": "首先，需要确定T127-Q3对应的月份，根据背景知识中的规则，Q3对应的是10, 11, 12月份。接下来，我们需要查询编制年度为'T127'，编制月度在[10, 11, 12]中的数据，然后按一级机构分组并计算每个一级机构的关闭数总和，找出关闭数最多的一级机构。最后，针对该一级机构，我们需要进一步按二级机构分组来找出关闭数最多的二级机构。",
  "sql": "WITH RankedOrgs AS (SELECT 一级机构, SUM(关闭数) AS 总关闭数 FROM a_sap_staffing_recruitment_plan_chinese WHERE 编制年度 = 'T127' AND 编制月度 IN (10, 11, 12) GROUP BY 一级机构 ORDER BY 总关闭数 DESC LIMIT 1) SELECT a.一级机构, b.二级机构, SUM(b.关闭数) AS 二级机构关闭数 FROM RankedOrgs a JOIN a_sap_staffing_recruitment_plan_chinese b ON a.一级机构 = b.一级机构 WHERE b.编制年度 = 'T127' AND b.编制月度 IN (10, 11, 12) GROUP BY a.一级机构, b.二级机构 ORDER BY 二级机构关闭数 DESC LIMIT 1",
  "ai_sql_result": "&quot;: [{&quot;一级机构&quot;: &quot;ENG&quot;, &quot;二级机构&quot;: null, &quot;二级机构关闭数&quot;: 79 "
}
